(window["webpackJsonpjsBundle"] = window["webpackJsonpjsBundle"] || []).push([["build-tax-receipt"],{

/***/ "./static/js/src/entry/account/routes/payments/build-tax-receipt.js":
/*!**************************************************************************!*\
  !*** ./static/js/src/entry/account/routes/payments/build-tax-receipt.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return buildTaxReceipt; });\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns/format */ \"./node_modules/date-fns/format/index.js\");\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(date_fns_format__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jspdf */ \"./node_modules/jspdf/dist/jspdf.min.js\");\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jspdf__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_format_currency__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/format-currency */ \"./static/js/src/entry/account/utils/format-currency.js\");\n\n\n\n\nfunction buildTaxReceipt(_ref) {\n  return new Promise(function ($return, $error) {\n    var lastYear, totalGiftsLastYear, greeting, doc, leftEdge, topEdge, response, ttLogo;\n    lastYear = _ref.lastYear, totalGiftsLastYear = _ref.totalGiftsLastYear, greeting = _ref.greeting;\n    doc = new jspdf__WEBPACK_IMPORTED_MODULE_1___default.a({\n      unit: 'px',\n      format: 'letter',\n      lineHeight: 1.5\n    });\n    leftEdge = 40;\n    topEdge = 30;\n    return Promise.resolve(axios__WEBPACK_IMPORTED_MODULE_2___default.a.get('/static/img/receipt-logo.png', {\n      responseType: 'blob'\n    })).then(function ($await_1) {\n      try {\n        response = $await_1;\n        return Promise.resolve(new Promise(function (resolve, reject) {\n          var reader = new window.FileReader();\n          reader.readAsDataURL(response.data);\n          reader.onerror = reject;\n\n          reader.onload = function () {\n            resolve(reader.result);\n          };\n        })).then(function ($await_2) {\n          try {\n            ttLogo = $await_2;\n            doc.addImage(ttLogo, 'PNG', leftEdge, topEdge, 100, 50);\n            doc.setFontSize(10);\n            doc.text(['919 Congress Avenue, Sixth Floor', 'Austin, TX 78701', 'P: 512-716-8600', 'F: 512-716-8601', 'www.texastribune.org'], 425, topEdge, {\n              align: 'right'\n            });\n            doc.setFontSize(12);\n            doc.text(\"\".concat(date_fns_format__WEBPACK_IMPORTED_MODULE_0___default()(new Date(), 'MMMM D, YYYY')), leftEdge, 130);\n            doc.text(\"Dear \".concat(greeting || 'Donor', \",\"), leftEdge, 155);\n            doc.text(\"Thank you for your support of The Texas Tribune \\u2014 the only nonpartisan, member-supported, digitally focused news organization that covers Texas public policy, politics, government and statewide issues. Our nonprofit newsroom relies on the generosity of people like you, which is why your support helps us produce serious journalism about issues that matter to Texas. Please find your \".concat(lastYear, \" giving summary below.\"), leftEdge, 180, {\n              maxWidth: '385'\n            });\n            doc.setFontStyle('bold');\n            doc.text(\"\".concat(lastYear, \" GIVING SUMMARY\"), leftEdge, 265);\n\n            if (greeting) {\n              doc.text('Donor', leftEdge, 290);\n              doc.setFontStyle('normal');\n              doc.text(greeting, leftEdge, 302);\n              doc.setFontStyle('bold');\n              doc.text('Total donation amount', leftEdge, 327);\n              doc.setFontStyle('normal');\n              doc.text(Object(_utils_format_currency__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(totalGiftsLastYear), leftEdge, 340);\n              doc.text(\"Thanks so much. We couldn't do this work without you!\", leftEdge, 365);\n              doc.text('The Texas Tribune Team', leftEdge, 390);\n              doc.text('Questions: membership@texastribune.org / 512.716.8695', leftEdge, 402);\n              doc.text('No goods or services were provided in exchange for this contribution. This letter may be used as a receipt for tax purposes. The Texas Tribune is a 501(c)3 nonprofit organization with Federal Tax ID #26-452709.', leftEdge, 427, {\n                maxWidth: '385'\n              });\n            } else {\n              // have to repeat some logic because different spacing\n              // is required if greeting is missing\n              doc.setFontStyle('bold');\n              doc.text('Total donation amount', leftEdge, 290);\n              doc.setFontStyle('normal');\n              doc.text(Object(_utils_format_currency__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(totalGiftsLastYear), leftEdge, 302);\n              doc.text(\"Thanks so much. We couldn't do this work without you!\", leftEdge, 327);\n              doc.text('The Texas Tribune Team', leftEdge, 352);\n              doc.text('Questions: membership@texastribune.org / 512.716.8695', leftEdge, 364);\n              doc.text('No goods or services were provided in exchange for this contribution. This letter may be used as a receipt for tax purposes. The Texas Tribune is a 501(c)3 nonprofit organization with Federal Tax ID #26-452709.', leftEdge, 389, {\n                maxWidth: '385'\n              });\n            }\n\n            doc.save(\"\".concat(lastYear, \"-texas-tribune-tax-receipt.pdf\"));\n            return $return();\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        }, $error);\n      } catch ($boundEx) {\n        return $error($boundEx);\n      }\n    }, $error);\n  });\n}\n\n//# sourceURL=webpack://jsBundle/./static/js/src/entry/account/routes/payments/build-tax-receipt.js?");

/***/ })

}]);
!function(){"use strict";function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t;"object"===("undefined"==typeof exports?"undefined":N(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).payment||(t.payment={})).js=e()}(function(){return function o(i,l,u){function s(n,e){if(!l[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(f)return f(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var a=l[n]={exports:{}};i[n][0].call(a.exports,function(e){var t=i[n][1][e];return s(t||e)},a,a.exports,o,i,l,u)}return l[n].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){var r,a,c=function(e){return c.isDOMElement(e)?e:document.querySelectorAll(e)};c.isDOMElement=function(e){return e&&null!=e.nodeName},a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,c.trim=function(e){return null===e?"":(e+"").replace(a,"")},r=/\r/g,c.val=function(e,t){var n;return 1<arguments.length?e.value=t:"string"==typeof(n=e.value)?n.replace(r,""):null===n?"":n},c.preventDefault=function(e){if("function"!=typeof e.preventDefault)return e.returnValue=!1;e.preventDefault()},c.normalizeEvent=function(e){var t=e;return null==(e={which:null!=t.which?t.which:void 0,target:t.target||t.srcElement,preventDefault:function(){return c.preventDefault(t)},originalEvent:t,data:t.data||t.detail}).which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e},c.on=function(e,t,n){var r,a,o,i,l,u,s,f;if(e.length)for(a=0,i=e.length;a<i;a++)r=e[a],c.on(r,t,n);else{if(!t.match(" "))return s=n,n=function(e){return e=c.normalizeEvent(e),s(e)},e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?(t="on"+t,e.attachEvent(t,n)):void(e["on"+t]=n);for(o=0,l=(f=t.split(" ")).length;o<l;o++)u=f[o],c.on(e,u,n)}},c.addClass=function(r,a){var o;return r.length?function(){for(var e=[],t=0,n=r.length;t<n;t++)o=r[t],e.push(c.addClass(o,a));return e}():r.classList?r.classList.add(a):r.className+=" "+a},c.hasClass=function(e,t){var n,r,a,o;if(e.length){for(r=!0,a=0,o=e.length;a<o;a++)n=e[a],r=r&&c.hasClass(n,t);return r}return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},c.removeClass=function(r,a){var e,o,t,n,i,l;if(r.length)return function(){for(var e=[],t=0,n=r.length;t<n;t++)o=r[t],e.push(c.removeClass(o,a));return e}();if(r.classList){for(l=[],t=0,n=(i=a.split(" ")).length;t<n;t++)e=i[t],l.push(r.classList.remove(e));return l}return r.className=r.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")},c.toggleClass=function(r,a,o){var i;return r.length?function(){for(var e=[],t=0,n=r.length;t<n;t++)i=r[t],e.push(c.toggleClass(i,a,o));return e}():o?c.hasClass(r,a)?void 0:c.addClass(r,a):c.removeClass(r,a)},c.append=function(r,a){var o;return r.length?function(){for(var e=[],t=0,n=r.length;t<n;t++)o=r[t],e.push(c.append(o,a));return e}():r.insertAdjacentHTML("beforeend",a)},c.find=function(e,t){return(e instanceof NodeList||e instanceof Array)&&(e=e[0]),e.querySelectorAll(t)},c.trigger=function(e,t,n){var r;try{r=new CustomEvent(t,{detail:n})}catch(e){(r=document.createEvent("CustomEvent")).initCustomEvent?r.initCustomEvent(t,!0,!0,n):r.initEvent(t,!0,!0,n)}return e.dispatchEvent(r)},t.exports=c},{}],2:[function($,M,e){(function(e){var i,u,s,a,l,t,n,r,o,f,c,d,v,h,p,g,m,y,C,w,E,D,L,x,b=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};function S(){}u=$("qj/src/qj.coffee"),l=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:t=/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:t,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6759|676[1-3])/,format:t,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:t,length:[13,16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^4011|438935|45(1416|76)|50(4175|6699|67|90[4-7])|63(6297|6368)/,format:t,length:[16],cvcLength:[3],luhn:!0}],s=function(e){var t,n,r;for(e=(e+"").replace(/\D/g,""),n=0,r=l.length;n<r;n++)if((t=l[n]).pattern.test(e))return t},a=function(e){for(var t,n=0,r=l.length;n<r;n++)if((t=l[n]).type===e)return t},p=function(e){for(var t,n=!0,r=0,a=(e+"").split("").reverse(),o=0,i=a.length;o<i;o++)t=a[o],t=parseInt(t,10),(n=!n)&&(t*=2),9<t&&(t-=9),r+=t;return r%10==0},h=function(e){var t;return null!=e.selectionStart&&e.selectionStart!==e.selectionEnd||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},g=function(n){return setTimeout(function(){var e=n.target,t=u.val(e);return t=i.fns.formatCardNumber(t),u.val(e,t)})},o=function(e){var t,n,r,a,o,i,l=String.fromCharCode(e.which);if(/^\d+$/.test(l)&&(a=e.target,i=u.val(a),t=s(i+l),n=(i.replace(/\D/g,"")+l).length,o=16,t&&(o=t.length[t.length.length-1]),!(o<=n||null!=a.selectionStart&&a.selectionStart!==i.length)))return(r=t&&"amex"===t.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(i)?(e.preventDefault(),u.val(a,i+" "+l)):r.test(i+l)?(e.preventDefault(),u.val(a,i+l+" ")):void 0},n=function(e){var t=e.target,n=u.val(t);if(!e.meta&&8===e.which&&(null==t.selectionStart||t.selectionStart===n.length))return/\d\s$/.test(n)?(e.preventDefault(),u.val(t,n.replace(/\d\s$/,""))):/\s\d?$/.test(n)?(e.preventDefault(),u.val(t,n.replace(/\s\d?$/,""))):void 0},f=function(e){var t,n,r=String.fromCharCode(e.which);if(/^\d+$/.test(r))return t=e.target,n=u.val(t)+r,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),u.val(t,"0"+n+" / ")):/^\d\d$/.test(n)?(e.preventDefault(),u.val(t,n+" / ")):void 0},v=function(e){var t,n,r=String.fromCharCode(e.which);if(/^\d+$/.test(r))return t=e.target,n=u.val(t)+r,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),u.val(t,"0"+n)):/^\d\d$/.test(n)?(e.preventDefault(),u.val(t,""+n)):void 0},c=function(e){var t,n,r=String.fromCharCode(e.which);if(/^\d+$/.test(r))return t=e.target,n=u.val(t),/^\d\d$/.test(n)?u.val(t,n+" / "):void 0},d=function(e){var t,n;if("/"===String.fromCharCode(e.which))return t=e.target,n=u.val(t),/^\d$/.test(n)&&"0"!==n?u.val(t,"0"+n+" / "):void 0},r=function(e){var t,n;if(!e.metaKey&&(t=e.target,n=u.val(t),8===e.which&&(null==t.selectionStart||t.selectionStart===n.length)))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),u.val(t,n.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),u.val(t,n.replace(/\s\/\s?\d?$/,""))):void 0},D=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||(32===e.which?e.preventDefault():0===e.which||(e.which<33||(t=String.fromCharCode(e.which),/[\d\s]/.test(t)?void 0:e.preventDefault())))},y=function(e){var t,n,r=e.target,a=String.fromCharCode(e.which);if(/^\d+$/.test(a)&&!h(r))if(n=(u.val(r)+a).replace(/\D/g,""),t=s(n)){if(!(n.length<=t.length[t.length.length-1]))return e.preventDefault()}else if(!(n.length<=16))return e.preventDefault()},w=function(e,t){var n=e.target,r=String.fromCharCode(e.which);if(/^\d+$/.test(r)&&!h(n))return(u.val(n)+r).replace(/\D/g,"").length>t?e.preventDefault():void 0},C=function(e){return w(e,6)},E=function(e){return w(e,2)},L=function(e){return w(e,4)},m=function(e){var t=e.target,n=String.fromCharCode(e.which);if(/^\d+$/.test(n)&&!h(t))return(u.val(t)+n).length<=4?void 0:e.preventDefault()},x=function(e){var t,r,n=e.target,a=u.val(n),o=i.fns.cardType(a)||"unknown";if(!u.hasClass(n,o))return t=function(){for(var e=[],t=0,n=l.length;t<n;t++)r=l[t],e.push(r.type);return e}(),u.removeClass(n,"unknown"),u.removeClass(n,t.join(" ")),u.addClass(n,o),u.toggleClass(n,"identified","unknown"!==o),u.trigger(n,"payment.cardType",o)},S.fns={cardExpiryVal:function(e){var t,n,r=(t=(e=e.replace(/\s/g,"")).split("/",2))[0];return 2===(null!=(n=t[1])?n.length:void 0)&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().slice(0,2)+n),{month:parseInt(r,10),year:n=parseInt(n,10)}},validateCardNumber:function(e){var t,n;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(t=s(e))&&(n=e.length,0<=b.call(t.length,n)&&(!1===t.luhn||p(e))))},validateCardExpiry:function(e,t){var n,r,a;return"object"===N(e)&&"month"in e&&(e=(a=e).month,t=a.year),!(!e||!t)&&(e=u.trim(e),t=u.trim(t),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(parseInt(e,10)<=12&&(2===t.length&&(t=(new Date).getFullYear().toString().slice(0,2)+t),r=new Date(t,e),n=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),n<r))))},validateCardCVC:function(e,t){var n,r;return e=u.trim(e),!!/^\d+$/.test(e)&&(t&&a(t)?(n=e.length,0<=b.call(null!=(r=a(t))?r.cvcLength:void 0,n)):3<=e.length&&e.length<=4)},cardType:function(e){var t;return e&&(null!=(t=s(e))?t.type:void 0)||null},formatCardNumber:function(e){var t,n,r,a=s(e);return a?(r=a.length[a.length.length-1],e=(e=e.replace(/\D/g,"")).slice(0,+r+1||9e9),a.format.global?null!=(n=e.match(a.format))?n.join(" "):void 0:(null!=(t=a.format.exec(e))&&t.shift(),null!=t?t.join(" "):void 0)):e}},S.restrictNumeric=function(e){return u.on(e,"keypress",D)},S.cardExpiryVal=function(e){return S.fns.cardExpiryVal(u.val(e))},S.formatCardCVC=function(e){return S.restrictNumeric(e),u.on(e,"keypress",m),e},S.formatCardExpiry=function(e){var t,n;return S.restrictNumeric(e),e.length&&2===e.length?(t=e[0],n=e[1],this.formatCardExpiryMultiple(t,n)):(u.on(e,"keypress",C),u.on(e,"keypress",f),u.on(e,"keypress",d),u.on(e,"keypress",c),u.on(e,"keydown",r)),e},S.formatCardExpiryMultiple=function(e,t){return u.on(e,"keypress",E),u.on(e,"keypress",v),u.on(t,"keypress",L)},S.formatCardNumber=function(e){return S.restrictNumeric(e),u.on(e,"keypress",y),u.on(e,"keypress",o),u.on(e,"keydown",n),u.on(e,"keyup",x),u.on(e,"paste",g),e},S.getCardArray=function(){return l},S.setCardArray=function(e){return l=e,!0},S.addToCardArray=function(e){return l.push(e)},S.removeFromCardArray=function(e){var t;for(t in l)l[t].type===e&&l.splice(t,1);return!0},i=S,M.exports=i,e.Payment=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"qj/src/qj.coffee":1}]},{},[2])(2)}),function o(i,l,u){function s(t,e){if(!l[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var a=l[t]={exports:{}};i[t][0].call(a.exports,function(e){return s(i[t][1][e]||e)},a,a.exports,o,i,l,u)}return l[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){var r,a=e("./src/valid-form"),o=(r=a)&&r.__esModule?r:{default:r};window.ValidForm=o.default,window.ValidForm.toggleInvalidClass=a.toggleInvalidClass,window.ValidForm.handleCustomMessages=a.handleCustomMessages,window.ValidForm.handleCustomMessageDisplay=a.handleCustomMessageDisplay},{"./src/valid-form":3}],2:[function(e,t,n){function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0}),n.clone=r,n.defaults=function(e,t){for(var n in e=r(e||{}),t)void 0===e[n]&&(e[n]=t[n]);return e},n.insertAfter=function(e,t){var n=e.nextSibling;{n?e.parentNode.insertBefore(t,n):parent.appendChild(t)}},n.insertBefore=function(e,t){e.parentNode.insertBefore(t,e)},n.forEach=function(e,t){if(!e)return;if(e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n],n,e)},n.debounce=function(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}},{}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toggleInvalidClass=a,n.handleCustomMessages=o,n.handleCustomMessageDisplay=l,n.default=function(e,t){if(!e||!e.nodeName)throw new Error("First arg to validForm must be a form, input, select, or textarea");var n=void 0,r=e.nodeName.toLowerCase();if(t=(0,u.defaults)(t,s),"form"===r)n=e.querySelectorAll("input, select, textarea"),function(t,e){var n=(0,u.debounce)(100,function(){var e=t.querySelector(":invalid");e&&e.focus()});(0,u.forEach)(e,function(e){return e.addEventListener("invalid",n)})}(e,n);else{if("input"!==r&&"select"!==r&&"textarea"!==r)throw new Error("Only form, input, select, or textarea elements are supported");n=[e]}!function(e,t){var n=t.invalidClass,r=t.customMessages;(0,u.forEach)(e,function(e){a(e,n),o(e,r),l(e,t)})}(n,t)};var u=e("./util");function a(e,t){e.addEventListener("invalid",function(){e.classList.add(t)}),e.addEventListener("input",function(){e.validity.valid&&e.classList.remove(t)})}var i=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing","customError"];function o(t,n){function e(){var e=t.validity.valid?null:function(e,t){t=t||{};for(var n=[e.type+"Mismatch"].concat(i),r=e.validity,a=0;a<n.length;a++){var o=n[a];if(r[o])return e.getAttribute("data-"+o)||t[o]}}(t,n);t.setCustomValidity(e||"")}t.addEventListener("input",e),t.addEventListener("invalid",e)}function l(a,e){var o=e.validationErrorClass,i=e.validationErrorParentClass,l=e.errorPlacement;function t(e){var t=e.insertError,n=a.parentNode,r=n.querySelector("."+o)||document.createElement("div");!a.validity.valid&&a.validationMessage?(r.className=o,r.textContent=a.validationMessage,t&&(("before"===l?(0,u.insertBefore):(0,u.insertAfter))(a,r),n.classList.add(i))):(n.classList.remove(i),r.remove())}a.addEventListener("input",function(){t({insertError:!1})}),a.addEventListener("invalid",function(e){e.preventDefault(),t({insertError:!0})})}var s={invalidClass:"invalid",validationErrorClass:"validation-error",validationErrorParentClass:"has-validation-error",customMessages:{},errorPlacement:"before"}},{"./util":2}]},{},[1]),document.documentElement.classList.remove("no-js"),document.documentElement.classList.add("js")}(jQuery);
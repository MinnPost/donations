<<<<<<< HEAD
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t;"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).payment||(t.payment={})).js=e()}(function(){return function i(a,s,l){function c(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[n]={exports:{}};a[n][0].call(r.exports,function(e){var t=a[n][1][e];return c(t||e)},r,r.exports,i,a,s,l)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){var o,r,p=function(e){return p.isDOMElement(e)?e:document.querySelectorAll(e)};p.isDOMElement=function(e){return e&&null!=e.nodeName},r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p.trim=function(e){return null===e?"":(e+"").replace(r,"")},o=/\r/g,p.val=function(e,t){var n;return 1<arguments.length?e.value=t:"string"==typeof(n=e.value)?n.replace(o,""):null===n?"":n},p.preventDefault=function(e){if("function"!=typeof e.preventDefault)return e.returnValue=!1;e.preventDefault()},p.normalizeEvent=function(e){var t=e;return null==(e={which:null!=t.which?t.which:void 0,target:t.target||t.srcElement,preventDefault:function(){return p.preventDefault(t)},originalEvent:t,data:t.data||t.detail}).which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e},p.on=function(e,t,n){var o,r,i,a,s,l,c,u;if(e.length)for(r=0,a=e.length;r<a;r++)o=e[r],p.on(o,t,n);else{if(!t.match(" "))return c=n,n=function(e){return e=p.normalizeEvent(e),c(e)},e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?(t="on"+t,e.attachEvent(t,n)):void(e["on"+t]=n);for(i=0,s=(u=t.split(" ")).length;i<s;i++)l=u[i],p.on(e,l,n)}},p.addClass=function(o,r){var i;return o.length?function(){for(var e=[],t=0,n=o.length;t<n;t++)i=o[t],e.push(p.addClass(i,r));return e}():o.classList?o.classList.add(r):o.className+=" "+r},p.hasClass=function(e,t){var n,o,r,i;if(e.length){for(o=!0,r=0,i=e.length;r<i;r++)n=e[r],o=o&&p.hasClass(n,t);return o}return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},p.removeClass=function(o,r){var e,i,t,n,a,s;if(o.length)return function(){for(var e=[],t=0,n=o.length;t<n;t++)i=o[t],e.push(p.removeClass(i,r));return e}();if(o.classList){for(s=[],t=0,n=(a=r.split(" ")).length;t<n;t++)e=a[t],s.push(o.classList.remove(e));return s}return o.className=o.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," ")},p.toggleClass=function(o,r,i){var a;return o.length?function(){for(var e=[],t=0,n=o.length;t<n;t++)a=o[t],e.push(p.toggleClass(a,r,i));return e}():i?p.hasClass(o,r)?void 0:p.addClass(o,r):p.removeClass(o,r)},p.append=function(o,r){var i;return o.length?function(){for(var e=[],t=0,n=o.length;t<n;t++)i=o[t],e.push(p.append(i,r));return e}():o.insertAdjacentHTML("beforeend",r)},p.find=function(e,t){return(e instanceof NodeList||e instanceof Array)&&(e=e[0]),e.querySelectorAll(t)},p.trigger=function(e,t,n){var o;try{o=new CustomEvent(t,{detail:n})}catch(e){(o=document.createEvent("CustomEvent")).initCustomEvent?o.initCustomEvent(t,!0,!0,n):o.initEvent(t,!0,!0,n)}return e.dispatchEvent(o)},t.exports=p},{}],2:[function(M,F,e){(function(e){var a,l,c,r,s,t,n,o,i,u,p,d,m,h,f,_,v,g,y,b,w,k,C,x,E=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};function S(){}l=M("qj/src/qj.coffee"),s=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:t=/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:t,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6759|676[1-3])/,format:t,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:t,length:[13,16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^4011|438935|45(1416|76)|50(4175|6699|67|90[4-7])|63(6297|6368)/,format:t,length:[16],cvcLength:[3],luhn:!0}],c=function(e){var t,n,o;for(e=(e+"").replace(/\D/g,""),n=0,o=s.length;n<o;n++)if((t=s[n]).pattern.test(e))return t},r=function(e){for(var t,n=0,o=s.length;n<o;n++)if((t=s[n]).type===e)return t},f=function(e){for(var t,n=!0,o=0,r=(e+"").split("").reverse(),i=0,a=r.length;i<a;i++)t=r[i],t=parseInt(t,10),(n=!n)&&(t*=2),9<t&&(t-=9),o+=t;return o%10==0},h=function(e){var t;return null!=e.selectionStart&&e.selectionStart!==e.selectionEnd||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},_=function(n){return setTimeout(function(){var e=n.target,t=l.val(e);return t=a.fns.formatCardNumber(t),l.val(e,t)})},i=function(e){var t,n,o,r,i,a,s=String.fromCharCode(e.which);if(/^\d+$/.test(s)&&(r=e.target,a=l.val(r),t=c(a+s),n=(a.replace(/\D/g,"")+s).length,i=16,t&&(i=t.length[t.length.length-1]),!(i<=n||null!=r.selectionStart&&r.selectionStart!==a.length)))return(o=t&&"amex"===t.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(a)?(e.preventDefault(),l.val(r,a+" "+s)):o.test(a+s)?(e.preventDefault(),l.val(r,a+s+" ")):void 0},n=function(e){var t=e.target,n=l.val(t);if(!e.meta&&8===e.which&&(null==t.selectionStart||t.selectionStart===n.length))return/\d\s$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\d\s$/,""))):/\s\d?$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\s\d?$/,""))):void 0},u=function(e){var t,n,o=String.fromCharCode(e.which);if(/^\d+$/.test(o))return t=e.target,n=l.val(t)+o,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),l.val(t,"0"+n+" / ")):/^\d\d$/.test(n)?(e.preventDefault(),l.val(t,n+" / ")):void 0},m=function(e){var t,n,o=String.fromCharCode(e.which);if(/^\d+$/.test(o))return t=e.target,n=l.val(t)+o,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),l.val(t,"0"+n)):/^\d\d$/.test(n)?(e.preventDefault(),l.val(t,""+n)):void 0},p=function(e){var t,n,o=String.fromCharCode(e.which);if(/^\d+$/.test(o))return t=e.target,n=l.val(t),/^\d\d$/.test(n)?l.val(t,n+" / "):void 0},d=function(e){var t,n;if("/"===String.fromCharCode(e.which))return t=e.target,n=l.val(t),/^\d$/.test(n)&&"0"!==n?l.val(t,"0"+n+" / "):void 0},o=function(e){var t,n;if(!e.metaKey&&(t=e.target,n=l.val(t),8===e.which&&(null==t.selectionStart||t.selectionStart===n.length)))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\s\/\s?\d?$/,""))):void 0},k=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||(32===e.which?e.preventDefault():0===e.which||(e.which<33||(t=String.fromCharCode(e.which),/[\d\s]/.test(t)?void 0:e.preventDefault())))},g=function(e){var t,n,o=e.target,r=String.fromCharCode(e.which);if(/^\d+$/.test(r)&&!h(o))if(n=(l.val(o)+r).replace(/\D/g,""),t=c(n)){if(!(n.length<=t.length[t.length.length-1]))return e.preventDefault()}else if(!(n.length<=16))return e.preventDefault()},b=function(e,t){var n=e.target,o=String.fromCharCode(e.which);if(/^\d+$/.test(o)&&!h(n))return(l.val(n)+o).replace(/\D/g,"").length>t?e.preventDefault():void 0},y=function(e){return b(e,6)},w=function(e){return b(e,2)},C=function(e){return b(e,4)},v=function(e){var t=e.target,n=String.fromCharCode(e.which);if(/^\d+$/.test(n)&&!h(t))return(l.val(t)+n).length<=4?void 0:e.preventDefault()},x=function(e){var t,o,n=e.target,r=l.val(n),i=a.fns.cardType(r)||"unknown";if(!l.hasClass(n,i))return t=function(){for(var e=[],t=0,n=s.length;t<n;t++)o=s[t],e.push(o.type);return e}(),l.removeClass(n,"unknown"),l.removeClass(n,t.join(" ")),l.addClass(n,i),l.toggleClass(n,"identified","unknown"!==i),l.trigger(n,"payment.cardType",i)},S.fns={cardExpiryVal:function(e){var t,n,o=(t=(e=e.replace(/\s/g,"")).split("/",2))[0];return 2===(null!=(n=t[1])?n.length:void 0)&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().slice(0,2)+n),{month:parseInt(o,10),year:n=parseInt(n,10)}},validateCardNumber:function(e){var t,n;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(t=c(e))&&(n=e.length,0<=E.call(t.length,n)&&(!1===t.luhn||f(e))))},validateCardExpiry:function(e,t){var n,o,r;return"object"===_typeof(e)&&"month"in e&&(e=(r=e).month,t=r.year),!(!e||!t)&&(e=l.trim(e),t=l.trim(t),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(parseInt(e,10)<=12&&(2===t.length&&(t=(new Date).getFullYear().toString().slice(0,2)+t),o=new Date(t,e),n=new Date,o.setMonth(o.getMonth()-1),o.setMonth(o.getMonth()+1,1),n<o))))},validateCardCVC:function(e,t){var n,o;return e=l.trim(e),!!/^\d+$/.test(e)&&(t&&r(t)?(n=e.length,0<=E.call(null!=(o=r(t))?o.cvcLength:void 0,n)):3<=e.length&&e.length<=4)},cardType:function(e){var t;return e&&(null!=(t=c(e))?t.type:void 0)||null},formatCardNumber:function(e){var t,n,o,r=c(e);return r?(o=r.length[r.length.length-1],e=(e=e.replace(/\D/g,"")).slice(0,+o+1||9e9),r.format.global?null!=(n=e.match(r.format))?n.join(" "):void 0:(null!=(t=r.format.exec(e))&&t.shift(),null!=t?t.join(" "):void 0)):e}},S.restrictNumeric=function(e){return l.on(e,"keypress",k)},S.cardExpiryVal=function(e){return S.fns.cardExpiryVal(l.val(e))},S.formatCardCVC=function(e){return S.restrictNumeric(e),l.on(e,"keypress",v),e},S.formatCardExpiry=function(e){var t,n;return S.restrictNumeric(e),e.length&&2===e.length?(t=e[0],n=e[1],this.formatCardExpiryMultiple(t,n)):(l.on(e,"keypress",y),l.on(e,"keypress",u),l.on(e,"keypress",d),l.on(e,"keypress",p),l.on(e,"keydown",o)),e},S.formatCardExpiryMultiple=function(e,t){return l.on(e,"keypress",w),l.on(e,"keypress",m),l.on(t,"keypress",C)},S.formatCardNumber=function(e){return S.restrictNumeric(e),l.on(e,"keypress",g),l.on(e,"keypress",i),l.on(e,"keydown",n),l.on(e,"keyup",x),l.on(e,"paste",_),e},S.getCardArray=function(){return s},S.setCardArray=function(e){return s=e,!0},S.addToCardArray=function(e){return s.push(e)},S.removeFromCardArray=function(e){var t;for(t in s)s[t].type===e&&s.splice(t,1);return!0},a=S,F.exports=a,e.Payment=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"qj/src/qj.coffee":1}]},{},[2])(2)}),function i(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return c(a[t][1][e]||e)},r,r.exports,i,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){var o,r=e("./src/valid-form"),i=(o=r)&&o.__esModule?o:{default:o};window.ValidForm=i.default,window.ValidForm.toggleInvalidClass=r.toggleInvalidClass,window.ValidForm.handleCustomMessages=r.handleCustomMessages,window.ValidForm.handleCustomMessageDisplay=r.handleCustomMessageDisplay},{"./src/valid-form":3}],2:[function(e,t,n){function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0}),n.clone=o,n.defaults=function(e,t){for(var n in e=o(e||{}),t)void 0===e[n]&&(e[n]=t[n]);return e},n.insertAfter=function(e,t){var n=e.nextSibling;{n?e.parentNode.insertBefore(t,n):parent.appendChild(t)}},n.insertBefore=function(e,t){e.parentNode.insertBefore(t,e)},n.forEach=function(e,t){if(!e)return;if(e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n],n,e)},n.debounce=function(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}},{}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toggleInvalidClass=r,n.handleCustomMessages=i,n.handleCustomMessageDisplay=s,n.default=function(e,t){if(!e||!e.nodeName)throw new Error("First arg to validForm must be a form, input, select, or textarea");var n=void 0,o=e.nodeName.toLowerCase();if(t=(0,l.defaults)(t,c),"form"===o)n=e.querySelectorAll("input, select, textarea"),function(t,e){var n=(0,l.debounce)(100,function(){var e=t.querySelector(":invalid");e&&e.focus()});(0,l.forEach)(e,function(e){return e.addEventListener("invalid",n)})}(e,n);else{if("input"!==o&&"select"!==o&&"textarea"!==o)throw new Error("Only form, input, select, or textarea elements are supported");n=[e]}!function(e,t){var n=t.invalidClass,o=t.customMessages;(0,l.forEach)(e,function(e){r(e,n),i(e,o),s(e,t)})}(n,t)};var l=e("./util");function r(e,t){e.addEventListener("invalid",function(){e.classList.add(t)}),e.addEventListener("input",function(){e.validity.valid&&e.classList.remove(t)})}var a=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing","customError"];function i(t,n){function e(){var e=t.validity.valid?null:function(e,t){t=t||{};for(var n=[e.type+"Mismatch"].concat(a),o=e.validity,r=0;r<n.length;r++){var i=n[r];if(o[i])return e.getAttribute("data-"+i)||t[i]}}(t,n);t.setCustomValidity(e||"")}t.addEventListener("input",e),t.addEventListener("invalid",e)}function s(r,e){var i=e.validationErrorClass,a=e.validationErrorParentClass,s=e.errorPlacement;function t(e){var t=e.insertError,n=r.parentNode,o=n.querySelector("."+i)||document.createElement("div");!r.validity.valid&&r.validationMessage?(o.className=i,o.textContent=r.validationMessage,t&&(("before"===s?(0,l.insertBefore):(0,l.insertAfter))(r,o),n.classList.add(a))):(n.classList.remove(a),o.remove())}r.addEventListener("input",function(){t({insertError:!1})}),r.addEventListener("invalid",function(e){e.preventDefault(),t({insertError:!0})})}var c={invalidClass:"invalid",validationErrorClass:"validation-error",validationErrorParentClass:"has-validation-error",customMessages:{},errorPlacement:"before"}},{"./util":2}]},{},[1]),function(l,s,c){var n="minnpost_giving",o={debug:!1,stripe_publishable_key:"",plaid_env:"",plaid_public_key:"",plaid_link:"#authorize-ach",minnpost_root:"https://www.minnpost.com",donate_form_selector:"#donate",donate_step_selector:"#panel--pay",confirm_form_selector:"#confirm",confirm_step_selector:"#panel--confirmation",active:"panel--pay",confirm:"panel--confirmation",query:"step",pay_cc_processing_selector:'input[id="pay-fees"]',fee_amount:".processing-amount",level_amount_selector:"#panel--pay .amount .level-amount",original_amount_selector:'[name="amount"]',intent_secret_selector:"#intent",fair_market_value_selector:"#fair_market_value",frequency_selector:".frequency",full_amount_selector:".full-amount",name_selector:".m-form-item-display-name",in_honor_or_memory_field_selector:".m-form-item-honor-memory",honor_or_memory_chooser:'input[name="in_honor_or_memory"]',honor_type_selector:".a-honor-type",honor_memory_input_group:".a-honor-or-memory",notify_selector:".notify_someone",notify_field_selector:".m-form-item-notify",anonymous_selector:"#anonymous",show_billing_country_selector:"#billing_show_country",billing_country_selector:".m-form-item-country",show_shipping_country_selector:"#shipping_show_country",shipping_country_selector:".m-form-item-shipping-country",shipping_address_selector:".m-form-item-shipping-address",use_for_shipping_selector:"#useforshipping",email_field_selector:"#email",password_field_selector:"#password",first_name_field_selector:"#first_name",last_name_field_selector:"#last_name",account_city_selector:"#billing_city",account_state_selector:"#billing_state",account_zip_selector:"#billing_zip",create_mp_selector:"#creatempaccount",password_selector:".m-form-item-password",additional_amount_field:"#additional_donation",billing_selector:"fieldset.m-billing-information",shipping_selector:"fieldset.m-shipping-information",credit_card_fieldset:".m-form-group-payment",choose_payment:"#choose-payment-method",payment_method_selector:".payment-method",cc_num_selector:"#card-number",cc_exp_selector:"#card-expiry",cc_cvv_selector:"#card-cvc",confirm_button_selector:"#finish",pay_button_selector:".a-button-pay",opp_id_selector:"#lock_key",recurring_selector:"#recurring",newsletter_group_selector:".support-newsletters",reason_field_selector:"#reason_for_supporting",share_reason_selector:"#reason_shareable",confirm_top_selector:".support--post-confirm",existing_newsletter_settings:"",levels:{1:{name:"bronze",max:60},2:{name:"silver",min:60,max:120},3:{name:"gold",min:120,max:240},4:{name:"platinum",min:240}}};function t(e,t){this.element=e,this.options=l.extend({},o,t),this._defaults=o,this._name=n,this.init()}t.prototype={init:function(e,t){c.documentElement.classList.remove("no-js"),c.documentElement.classList.add("js"),this.options.amount=!0!==e?parseFloat(l(this.options.level_amount_selector,this.element).text()):t,this.options.original_amount=parseInt(l(this.options.original_amount_selector,this.element).val(),10),this.options.frequency=parseFloat(l(this.options.frequency_selector,this.element).attr("data-year-freq"));var n=l(this.options.recurring_selector,this.element).val();void 0!==n&&(this.options.recurring=n.charAt(0).toUpperCase()+n.slice(1)),this.options.processing_fee=(Math.round(parseFloat(this.options.fee_amount)*Math.pow(10,2))/Math.pow(10,2)).toFixed(2),this.options.processing_fee_text=this.options.processing_fee,this.options.cardType=null,this.options.create_account=!1;var o=l(this.options.pay_button_selector).text();this.options.button_text=o,this.stripe=Stripe(this.options.stripe_publishable_key),this.elements=this.stripe.elements({fonts:[{cssSrc:"https://use.typekit.net/cxj7fzg.css"}]}),""!==c.referrer&&l("#edit_url").prop("href",c.referrer),!0===this.options.debug&&this.debug(this.options);var r=this.qs[this.options.query];void 0===r&&(r=this.options.active),this.tabNavigation(r),this.amountAsRadio(this.element,this.options),this.amountUpdated(this.element,this.options),0<l(this.options.pay_cc_processing_selector).length&&this.creditCardProcessingFees(this.options,e),0<l(this.options.donate_step_selector).length&&(this.options.level=this.checkLevel(this.element,this.options,"name"),this.options.levelnum=this.checkLevel(this.element,this.options,"num"),this.donateAnonymously(this.element,this.options),this.honorOrMemoryToggle(this.element,this.options),this.outsideUnitedStates(this.element,this.options),this.shippingAddress(this.element,this.options),this.allowMinnpostAccount(this.element,this.options),this.choosePaymentMethod(this.element,this.options),this.creditCardFields(this.element,this.options),this.achFields(this.element,this.options),this.validateAndSubmit(this.element,this.options)),0<l(this.options.confirm_step_selector).length&&(this.showNewsletterSettings(this.element,this.options),this.confirmMessageSubmit(this.element,this.options))},qs:function(e){if(""===e)return{};for(var t={},n=0;n<e.length;++n){var o=e[n].split("=",2);1===o.length?t[o[0]]="":t[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return t}(s.location.search.substr(1).split("&")),debug:function(e){!0===this.options.debug&&("object"!==_typeof(e)?console.log(e):console.dir(e),console.dir(this))},getQueryStrings:function(e){if(void 0===e||""===e)return{};e=(e="?"+e.split("?")[1]).substr(1).split("&");for(var t={},n=0;n<e.length;++n){var o=e[n].split("=",2);1===o.length?t[o[0]]="":t[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return t},tabNavigation:function(e){var t=l(".progress--donation li."+e).index()+1,n=l(".progress--donation li").length,o=l(this.options.opp_id_selector).val(),r=t+1,i=!1;this.debug("step is "+t+" and nav item count is "+n+" and opp id is "+o+" and next step is "+r),0<l(this.options.confirm_step_selector).length&&(e=this.options.confirm,l(".progress--donation li."+e+" span").addClass("active"),t=l(".progress--donation li."+e).index()+1,0<l(this.options.confirm_button_selector).length&&(n+=1)),t===n-1&&0<l(this.options.opp_id_selector).length?(this.debug("this is a payment step but there is a step after it"),t="purchase"):t===n&&0<l(this.options.opp_id_selector).length?(this.debug("this is a payment step and there is no step after it"),t="purchase"):t===n&&0===l(this.options.opp_id_selector).length&&(this.debug("this is a post-finish step. it does not have an id"),t+=1,i=!0),this.analyticsTrackingStep(t,i),0===l(".progress--donation li .active").length?(l("#"+e).show(),l(".progress--donation li."+e+" a").addClass("active")):(e=l(".progress--donation li .active").parent().prop("class"),l("#"+e).show())},analyticsTrackingStep:function(e,t){var n=this.checkLevel(this.element,this.options,"name"),o=l(this.options.original_amount_selector).val(),r=this.options.recurring,i=l(this.options.opp_id_selector).val();!0!==t&&ga("ec:addProduct",{id:"minnpost_"+n.toLowerCase()+"_membership",name:"MinnPost "+n.charAt(0).toUpperCase()+n.slice(1)+" Membership",category:"Donation",brand:"MinnPost",variant:r,price:o,quantity:1}),"purchase"===e?(this.debug("add a purchase action. step is "+e),ga("ec:setAction",e,{id:i,affiliation:"MinnPost",revenue:o})):(this.debug("add a checkout action. step is "+e),ga("ec:setAction","checkout",{step:e})),ga("set",{page:s.location.pathname,title:c.title}),ga("send","pageview",s.location.pathname)},amountAsRadio:function(e,t){l(t.original_amount_selector,e).change(function(){l(this).is(":radio")&&(t.original_amount=parseInt(l(t.original_amount_selector+":checked",e).val(),10))})},amountUpdated:function(e,t){var n=this,o=l(t.choose_payment+" input").val(),r=l(t.original_amount_selector,e);r.is(":radio")&&(r=l(t.original_amount_selector+":checked",e)),n.setFairMarketValue(r),n.setPaymentIntent(),l(t.original_amount_selector,e).change(function(){n.options.original_amount=parseInt(l(this,e).val(),10),"bank_account"===o?n.calculateFees(n.options.original_amount,"bank_account"):n.calculateFees(n.options.original_amount,"card"),n.setPaymentIntent(),n.setFairMarketValue(l(this,e))}),l(t.additional_amount_field,e).change(function(){n.options.original_amount=parseInt(l(t.original_amount_selector,e).val(),10),"bank_account"===o?n.calculateFees(n.options.original_amount,"bank_account"):n.calculateFees(n.options.original_amount,"card"),n.setPaymentIntent()})},setPaymentIntent:function(){var e=this.getTotalAmount(),t=l(this.options.choose_payment+" input").val(),n=!1,o=l(this.options.pay_cc_processing_selector);(l(o).is(":checked")||l(o).prop("checked"))&&(n=!0);var r=this,i={amount:e,payment_type:t,pay_fees:n,currency:"usd"};l.ajax({method:"POST",url:"/get-payment-intent/",data:i}).done(function(e){l(r.options.intent_secret_selector).val(e.clientSecret)})},getPaymentIntent:function(){return l(this.options.intent_secret_selector).val()},getTotalAmount:function(e){var t,n=e=void 0!==e?e:this.options.original_amount;return 0<l(this.options.additional_amount_field).length&&0<l(this.options.additional_amount_field).val()&&(t=l(this.options.additional_amount_field).val(),n=parseInt(t,10)+parseInt(e,10)),n},setFairMarketValue:function(e){var t;0<l(this.options.fair_market_value_selector).length&&(t=e.data("fair-market-value"),l(this.options.fair_market_value_selector).val(t))},calculateFees:function(e,t){var n=this,o={amount:n.getTotalAmount(e),stripe_payment_type:t};n.setStripePaymentType(t),l.ajax({method:"POST",url:"/calculate-fees/",data:o}).done(function(e){0<l(e.fees).length&&(l(n.options.fee_amount).text(parseFloat(e.fees).toFixed(2)),n.creditCardFeeCheckbox(l(n.options.pay_cc_processing_selector)))})},creditCardProcessingFees:function(){var e=this;e.creditCardFeeCheckbox(l(this.options.pay_cc_processing_selector)),l(this.options.pay_cc_processing_selector).on("change",function(){e.creditCardFeeCheckbox(this),e.setPaymentIntent()})},setStripePaymentType:function(e){0===l('input[name="stripe_payment_type"]').length&&l(this.options.donate_form_selector).append('<input type="hidden" name="stripe_payment_type">'),l('input[name="stripe_payment_type"]').val(e)},creditCardFeeCheckbox:function(e){var t=this.getTotalAmount(),n=l(e).is(":checked")||l(e).prop("checked")?(l(".amount .level-amount").addClass("full-amount"),t+parseFloat(l(this.options.fee_amount).text())):t;l(this.options.full_amount_selector).text(parseFloat(n).toFixed(2))},donateAnonymously:function(e,t){var n=this;n.toggleAnonymous(l(t.anonymous_selector,e)),l(t.anonymous_selector,e).change(function(){n.toggleAnonymous(l(this))})},toggleAnonymous:function(e){e.is(":checked")?l(this.options.name_selector+" div:first",this.element).hide():l(this.options.name_selector+" div:first",this.element).show()},checkLevel:function(e,t,n){var i,a="",s=0,o=t.frequency,r=t.original_amount;return 12===o?i=r*o:1===o&&(i=r),l.each(t.levels,function(e,t){var n=t.name,o=t.max,r=t.min;if(void 0!==r&&void 0!==o){if(r<=i&&i<o)return a=n,s=e,!1}else if(void 0!==o){if(i<o)return a=n,s=e,!1}else if(void 0!==r&&r<=i)return a=n,s=e,!1}),"name"===n?a:"num"===n?s:void 0},honorOrMemory:function(e,t){l(t.honor_or_memory_chooser+":checked").val()?(l(t.honor_memory_input_group,e).show(),l(t.honor_type_selector).text(l(t.honor_or_memory_chooser+":checked").val())):(l(t.honor_memory_input_group,e).hide(),l(t.honor_name_selector+" input",e).val(""))},honorOrMemoryToggle:function(e,t){var n=this;n.honorOrMemory(n.element,n.options),l(t.honor_or_memory_chooser,e).change(function(){n.honorOrMemory(n.element,n.options)})},outsideUnitedStates:function(e,t){l(t.show_billing_country_selector).click(function(){return l(t.billing_country_selector).show(),l(this).parent().hide(),!1}),l(t.show_shipping_country_selector).click(function(){return l(t.shipping_country_selector).show(),l(this).parent().hide(),!1})},shippingAddress:function(e,t){var n=this,o=!1;0<l(t.use_for_shipping_selector).length&&(o=!0),!0===o&&(l(t.use_for_shipping_selector,e).parent().show(),l(t.use_for_shipping_selector,e).is(":checked")?l(t.shipping_selector).hide():l(t.shipping_selector).show(),l(t.use_for_shipping_selector,e).change(function(){n.shippingAddress(e,t)}))},allowMinnpostAccount:function(t,n){var e,o=this;function r(){var e=l(n.email_field_selector,t).val();o.checkMinnpostAccount(t,n,e)}o.showPassword(),o.showPasswordStrength(),o.spamEmail(l(n.email_field_selector,t)),l(n.email_field_selector,t).change(function(){o.spamEmail(l(n.email_field_selector,t))}),o.toggleAccountFields(l(n.create_mp_selector,t)),l(n.create_mp_selector,t).change(function(){o.toggleAccountFields(l(n.create_mp_selector,t))});l(n.email_field_selector,t).keyup(function(){clearTimeout(e),l(n.email_field_selector,t).val&&(e=setTimeout(r,5e3))})},spamEmail:function(e){var t=e.parent();0===l(".a-spam-email",t).length&&t.append('<p class="a-form-caption a-error a-spam-email">This email address has been detected as a spammer.</p>'),l(".a-spam-email",t).hide(),t.removeClass("invalid a-error")},toggleAccountFields:function(e){e.is(":checked")?(e.parent().before('<p class="a-form-caption a-account-exists a-account-exists-success">There is already a MinnPost.com account with this email address.</p>'),l(".a-account-exists").hide(),l(this.options.password_selector,this.element).show(),this.options.create_account=!0):l(this.options.password_selector,this.element).hide()},showPassword:function(){var e=l(".btn-submit"),t=l(this.options.password_selector,this.element),n=l('input[name="password"]',t);l(".a-account-exists").hide();t.append('<div class="a-form-show-password a-form-caption"><label><input type="checkbox" name="show_password" id="show-password-checkbox" value="1"> Show password</label></div>'),l("#show-password-checkbox").on("click",function(e){l(this).is(":checked")?n.attr("type","text"):n.attr("type","password")}),e.on("click",function(e){n.attr("type","password")})},showPasswordStrength:function(){var e=this;0<l(".a-password-strength").length&&(l(".a-form-show-password").after(l('<div class="a-password-strength"><meter max="4" id="password-strength"><div></div></meter><p class="a-form-caption" id="password-strength-text"></p></div>')),l("body").on("keyup","input[name=password]",function(){e.checkPasswordStrength(l("input[name=password]"),l("#password-strength"),l("#password-strength-text"))}))},checkPasswordStrength:function(e,t,n){var o=e.val(),r=zxcvbn(o).score;switch(n.removeClass("short bad good strong"),r){case 2:n.addClass("bad").html("Strength: <strong>Weak</strong>");break;case 3:n.addClass("good").html("Strength: <strong>Medium</strong>");break;case 4:n.addClass("strong").html("Strength: <strong>Strong</strong>");break;case 5:n.addClass("short").html("Strength: <strong>Very weak</strong>");break;default:n.addClass("short").html("Strength: <strong>Very weak</strong>")}return t.val(r),r},checkMinnpostAccount:function(t,n,e){var o={email:e},r=this;l.ajax({method:"GET",url:n.minnpost_root+"/wp-json/user-account-management/v1/check-account",data:o}).done(function(e){if("success"===e.status&&"user exists"===e.reason)l(n.create_mp_selector,t).is(":checked")&&(l(n.password_selector,t).hide(),l(n.create_mp_selector,t).parent().hide(),l(".a-account-exists",t).show()),l(n.create_mp_selector,t).on("change",function(){l(n.create_mp_selector,t).is(":checked")&&(l(n.password_selector,t).hide(),l(n.create_mp_selector,t).parent().hide(),l(".a-account-exists",t).show())});else{if("spam"!==e.status)return l(n.create_mp_selector,t).is(":checked")?(l(n.password_selector,t).show(),n.create_account=!0):l(n.password_selector,t).hide(),l(".a-account-exists",t).hide(),!1;l(r.options.email_field_selector).addClass("invalid a-error"),l(".a-spam-email").show()}})},choosePaymentMethod:function(e,t){var n,o,r=this;0<l(t.choose_payment).length&&(l(t.choose_payment+" input").is(":checked")&&(n=l(t.choose_payment+" input:checked").attr("id"),o=l(t.choose_payment+" input:checked").val(),r.setupPaymentMethod(n,o)),l(t.choose_payment+" input").change(function(e){r.setupPaymentMethod(this.id,this.value),r.setPaymentIntent(),"bank_account"===this.value?(l('input[name="stripeToken"]',l(r.options.donate_form_selector)).remove(),r.achFields(r.element,r.options)):(l('input[name="public_token"]',l(r.options.donate_form_selector)).remove(),l('input[name="account_id"]',l(r.options.donate_form_selector)).remove(),l('input[name="bankToken"]',l(r.options.donate_form_selector)).remove(),r.calculateFees(r.options.original_amount,"card"))}))},setupPaymentMethod:function(e,t){l(this.options.payment_method_selector).removeClass("active"),l(this.options.payment_method_selector+"."+e).addClass("active"),l(this.options.payment_method_selector+":not(.active) input").val(""),"bank_account"===t?this.calculateFees(this.options.original_amount,"bank_account"):this.calculateFees(this.options.original_amount,"card")},creditCardFields:function(n,o){var r=this,e={base:{iconColor:"#666EE8",lineHeight:"43px",fontWeight:400,fontFamily:"ff-meta-web-pro",fontSize:"24px"},invalid:{color:"#1a1818"}};0===l(".credit-card-group").length&&0===l(".payment-method.choose-card").length||(r.cardNumberElement=r.elements.create("cardNumber",{style:e}),r.cardNumberElement.mount(o.cc_num_selector),r.cardExpiryElement=r.elements.create("cardExpiry",{style:e}),r.cardExpiryElement.mount(o.cc_exp_selector),r.cardCvcElement=r.elements.create("cardCvc",{style:e}),r.cardCvcElement.mount(o.cc_cvv_selector),r.cardNumberElement.on("change",function(e){var t="card";r.stripeErrorDisplay(e,l(o.cc_num_selector,n),n,o),r.buttonStatus(o,l(r.options.donate_form_selector).find("button"),!1),e.brand&&("amex"===e.brand&&(t="amex"),r.setBrandIcon(e.brand)),r.calculateFees(r.options.original_amount,t),r.setPaymentIntent()}),r.cardExpiryElement.on("change",function(e){r.stripeErrorDisplay(e,l(o.cc_exp_selector,n),n,o),r.buttonStatus(o,l(r.options.donate_form_selector).find("button"),!1)}),r.cardCvcElement.on("change",function(e){r.stripeErrorDisplay(e,l(o.cc_cvv_selector,n),n,o),r.buttonStatus(o,l(r.options.donate_form_selector).find("button"),!1)}))},setBrandIcon:function(e){var t={visa:"pf-visa",mastercard:"pf-mastercard",amex:"pf-american-express",discover:"pf-discover",diners:"pf-diners",jcb:"pf-jcb",unknown:"pf-credit-card"},n=c.getElementById("brand-icon"),o="pf-credit-card";e in t&&(o=t[e]);for(var r=n.classList.length-1;0<=r;r--)n.classList.remove(n.classList[r]);n.classList.add("pf"),n.classList.add(o)},achFields:function(o,r){var t,i="bankToken",a='input[name="'+i+'"]';""!=r.plaid_env&&""!=r.key&&"undefined"!=typeof Plaid&&(t=Plaid.create({selectAccount:!0,apiVersion:"v2",env:r.plaid_env,clientName:"MinnPost",key:r.plaid_public_key,product:"auth",onLoad:function(){},onSuccess:function(e,t){var n=l(r.donate_form_selector);n.append(l('<input type="hidden" name="public_token" />').val(e)),n.append(l('<input type="hidden" name="account_id" />').val(t.account_id)),l.ajax({url:"/plaid_token/",data:l(n).serialize(),type:"POST"}).done(function(e){void 0!==e.error?l(r.plaid_link).parent().after('<p class="error">'+e.error+"</p>"):(0<l(a).length?l(a).val(e.stripe_bank_account_token):l(r.donate_form_selector).prepend(l('<input type="hidden" name="'+i+'">').val(e.stripe_bank_account_token)),l(r.plaid_link,o).html("<strong>Your account was successfully authorized</strong>").contents().unwrap())}).error(function(e){l(r.plaid_link).parent().after('<p class="error">'+e.error+"</p>")})},onExit:function(){}}),l(r.plaid_link,o).click(function(e){e.preventDefault(),l(r.payment_method_selector+" .error").remove(),t.open()}))},buttonStatus:function(e,t,n){t.prop("disabled",n),!1===n?t.text(e.button_text):t.text("Processing")},scrollToFormError:function(){var i=l(".m-form");i.find(":input").on("invalid",function(){var e=l(this),t=i.find(".a-error").first(),n=t.parent();if(e[0]===t[0]){var o=n.offset().top,r=s.pageYOffset;if(r<o&&o<r+s.innerHeight)return!0;l("html, body").scrollTop(o)}})},validateAndSubmit:function(r,i){c.querySelectorAll(".m-form").forEach(function(e){ValidForm(e,{validationErrorParentClass:"m-has-validation-error",validationErrorClass:"a-validation-error",invalidClass:"a-error",errorPlacement:"after"})}),this.scrollToFormError();var a=this;l(i.donate_form_selector).submit(function(e){e.preventDefault(),l(".a-check-field").remove(),l("input, label",r).removeClass("a-error");var t,n=!0,o=l('input[name="stripe_payment_type"]').val();l(a.options.choose_payment+" input").change(function(){l(a.options.payment_method_selector+" .error").remove(),a.buttonStatus(i,l(a.options.donate_form_selector).find("button"),!1)}),"bank_account"===o&&0===l('input[name="bankToken"]').length&&(n=!1,l(a.options.payment_method_selector).prepend('<p class="error">You are required to enter credit card information, or to authorize MinnPost to charge your bank account, to make a payment.</p>')),!0===n?(a.buttonStatus(a.options,l(a.options.donate_form_selector).find("button"),!0),a.generateTokenData(),!0===a.options.create_account&&(t={email:l(a.options.email_field_selector,r).val(),first_name:l(a.options.first_name_field_selector,r).val(),last_name:l(a.options.last_name_field_selector,r).val(),password:l(a.options.password_field_selector,r).val(),city:l(a.options.account_city_selector,r).val(),state:l(a.options.account_state_selector,r).val(),zip:l(a.options.account_zip_selector,r).val()},l.ajax({method:"POST",url:a.options.minnpost_root+"/wp-json/user-account-management/v1/create-user",data:t}).done(function(e){"success"===e.status&&e.reason})),0==l('input[name="bankToken"]').length?a.confirmCardPayment(a.cardNumberElement):a.stripeTokenHandler(l("#bankToken").val(),"bank_account")):a.buttonStatus(a.options,l(a.options.donate_form_selector).find("button"),!1)})},confirmCardPayment:function(e){var t,n,o=this,r=l(o.options.donate_form_selector);intent=o.getPaymentIntent(),o.stripe.confirmCardPayment(intent,{payment_method:{card:e}}).then(function(e){e.error?(o.buttonStatus(o.options,r.find("button"),!1),t=e.error.field+"_field_selector",n="",n="string"==typeof e.error.message?e.error.message:e.error.message[0],0<l(t).length&&(l(o.options[t],element).addClass("error"),l(o.options[t],element).prev().addClass("error"),l(o.options[t],element).after('<span class="check-field invalid">'+n+"</span>"))):(e.paymentIntent.payment_method,console.dir(e))})},stripeErrorDisplay:function(e,t,n,o){var r=t.attr("id");l(".a-card-instruction."+r).removeClass("a-error"),l(".a-card-instruction."+r).empty(),e.error?(l(".a-card-instruction."+r).text(e.error.message+" Please try again."),l(".a-card-instruction."+r).addClass("a-error"),t.parent().addClass("a-error")):(l(".a-card-instruction."+r).removeClass("a-error"),l(".a-card-instruction."+r).empty(),l(o.cc_num_selector,n).removeClass("a-error"),l(o.cc_exp_selector,n).removeClass("a-rror"),l(o.cc_cvv_selector,n).removeClass("a-error"),l(o.cc_num_selector,n).parent().removeClass("a-error"),l(o.cc_exp_selector,n).parent().removeClass("a-error"),l(o.cc_cvv_selector,n).parent().removeClass("a-error"))},generateTokenData:function(){var e={},t="",t=0<l("#full_name").length?l("#full_name").val():l("#first_name").val()+" "+l("#last_name").val();e.name=t;var n="None";""!=l('input[name="full_address"]').val()&&(n=l("#full_address").val(),""!=l('input[name="billing_street"]').val()&&(n=l('input[name="billing_street"]').val()),e.address_line1=n);var o;""!=l('input[name="billing_city"]').val()&&(o=l('input[name="billing_city"]').val(),e.address_city=o);var r;""!=l('input[name="billing_state"]').val()&&(r=l('input[name="billing_state"]').val(),e.address_state=r);var i;""!=l('input[name="billing_zip"]').val()&&(i=l('input[name="billing_zip"]').val(),e.address_zip=i);var a="US";return""!=l('input[name="billing_country"]').val()&&(a=l('input[name="billing_country"]').val()),e.address_country=a,e},createToken:function(e,t){var o=this;o.stripe.createToken(e,t).then(function(e){var t,n;e.error?(o.buttonStatus(o.options,l(o.options.donate_form_selector).find("button"),!1),t=e.error.field+"_field_selector",n="",n="string"==typeof e.error.message?e.error.message:e.error.message[0],0<l(t).length&&(l(o.options[t],element).addClass("a-error"),l(o.options[t],element).prev().addClass("a-error"),l(o.options[t],element).after('<span class="a-check-field invalid">'+n+"</span>"))):o.stripeTokenHandler(e.token,"card")})},stripePaymentHandler:function(e,t){var a=this,n=l(this.options.donate_form_selector),o="",r="stripeToken",i='input[name="'+r+'"]',o=void 0!==l(n).data("action")?l(n).data("action"):s.location.pathname;"card"===t&&(0<token.card.brand.length&&"American Express"===token.card.brand&&(t="amex"),0<l(i).length?l(i).val(token.id):n.append(l('<input type="hidden" name="'+r+'">').val(token.id))),l('input[name="stripe_payment_type"]').val(t),l.ajax({url:o,cache:!1,data:l(n).serialize(),type:"POST"}).done(function(i){void 0!==i.errors?(a.buttonStatus(a.options,l(a.options.donate_form_selector).find("button"),!1),l.each(i.errors,function(e,t){var n=t.field+"_field_selector",o="",r="",o="string"==typeof t.message?t.message:t.message[0];0<l(a.options[n]).length&&(l(a.options[n]).addClass("a-error"),l(a.options[n]).prev().addClass("a-error"),l(a.options[n]).after('<span class="a-check-field invalid">'+o+"</span>")),void 0!==t&&(a.buttonStatus(a.options,l(a.options.donate_form_selector).find("button"),!1,"card"),"invalid_number"!=t.code&&"incorrect_number"!=t.code&&"card_declined"!=t.code&&"processing_error"!=t.code||(r=l(a.options.cc_num_selector)),"invalid_expiry_month"!=t.code&&"invalid_expiry_year"!=t.code&&"expired_card"!=t.code||(r=l(a.options.cc_exp_selector)),"invalid_cvc"!=t.code&&"incorrect_cvc"!=t.code||(r=l(a.options.cc_cvv_selector)),""!==r&&a.stripeErrorDisplay(i.errors,r,a.element,a.options),"recaptcha"==t.field&&l(a.options.pay_button_selector).before('<p class="a-form-caption a-recaptcha-error">'+o+"</p>"),"invalid_request_error"==t.type&&l(a.options.pay_button_selector).before('<p class="error error-invalid-request">'+t.message+"</p>")),void 0!==i.errors[0]&&(n=i.errors[0].field+"_field_selector",0<l(n).length&&l("html, body").animate({scrollTop:l(options[n]).parent().offset().top},2e3))})):n.get(0).submit()}).error(function(e){a.buttonStatus(a.options,l(a.options.donate_form_selector).find("button"),!1)})},showNewsletterSettings:function(n,o){var e,r="";0<l(o.newsletter_group_selector).length&&(e={shortcode:"newsletter_form",placement:"useraccount"},l.ajax({method:"GET",url:o.minnpost_root+"/wp-json/minnpost-api/v2/mailchimp/form",data:e}).done(function(e){void 0!==e.group_fields&&(l.each(e.group_fields,function(e,t){r+='<fieldset class="m-form-item support-newsletter m-form-item-'+t.type+'">',r+="<label>"+t.name+":</label>",0<t.contains.length&&(r+='<div class="m-form-item m-form-item-newsletter">',l.each(t[t.contains],function(e,t){r+='<label><input name="groups_submitted" type="checkbox" value="'+t.id+'">'+t.name+"</label>"}),r+="</div>"),r+="</fieldset>"}),l(o.newsletter_group_selector).html(r))})),0<l(o.newsletter_group_selector).length&&void 0!==l(o.email_field_selector,n).val()&&(e={email:l(o.email_field_selector,n).val()},l.ajax({method:"GET",url:o.minnpost_root+"/wp-json/minnpost-api/v2/mailchimp/user",data:e}).done(function(e){var t;void 0!==e.mailchimp_status&&l(o.email_field_selector,n).after('<input name="mailchimp_status" type="hidden" value="'+e.mailchimp_status+'">'),void 0!==e.mailchimp_user_id&&l(o.email_field_selector,n).after('<input name="mailchimp_user_id" type="hidden" value="'+e.mailchimp_user_id+'">'),"subscribed"===e.mailchimp_status&&(l(".a-confirm-instructions").text(l(".a-confirm-instructions").attr("data-known-user")),t=e.groups,l.each(t,function(e,t){!0===t?l(':checkbox[value="'+e+'"]').prop("checked",!0):l(':checkbox[value="'+e+'"]').prop("checked",!1)}))}))},confirmMessageSubmit:function(i,a){var s=l(a.newsletter_group_selector+" input").serialize();l(a.confirm_form_selector).submit(function(e){e.preventDefault();var o,t=l(a.confirm_form_selector),n=l(a.newsletter_group_selector+" input:checked"),r=n.serialize();s!==r&&void 0!==n?(o={email:l(a.email_field_selector,i).val(),first_name:l(a.first_name_field_selector,i).val(),last_name:l(a.last_name_field_selector,i).val(),groups_submitted:{},groups_available:"all"},0<l('input[name="mailchimp_status"]').length&&(o.mailchimp_status=l('input[name="mailchimp_status"]').val()),0<l('input[name="mailchimp_user_id"]').length&&(o.mailchimp_user_id=l('input[name="mailchimp_user_id"]').val()),void 0!==n&&l.each(n,function(e,t){var n=l(this).val();o.groups_submitted[e]=n}),l.ajax({url:a.minnpost_root+"/wp-json/minnpost-api/v2/mailchimp/user",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(o)}).done(function(e){e.success,t.get(0).submit()}).fail(function(e){t.get(0).submit()})):t.get(0).submit()})}},l.fn[n]=function(e){return this.each(function(){l.data(this,"plugin_"+n)||l.data(this,"plugin_"+n,new t(this,e))})}}(jQuery,window,document);
=======
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t;"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).payment||(t.payment={})).js=e()}(function(){return function a(i,s,l){function c(n,e){if(!s[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[n]={exports:{}};i[n][0].call(r.exports,function(e){var t=i[n][1][e];return c(t||e)},r,r.exports,a,i,s,l)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){var o,r,p=function(e){return p.isDOMElement(e)?e:document.querySelectorAll(e)};p.isDOMElement=function(e){return e&&null!=e.nodeName},r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p.trim=function(e){return null===e?"":(e+"").replace(r,"")},o=/\r/g,p.val=function(e,t){var n;return 1<arguments.length?e.value=t:"string"==typeof(n=e.value)?n.replace(o,""):null===n?"":n},p.preventDefault=function(e){if("function"!=typeof e.preventDefault)return e.returnValue=!1;e.preventDefault()},p.normalizeEvent=function(e){var t=e;return null==(e={which:null!=t.which?t.which:void 0,target:t.target||t.srcElement,preventDefault:function(){return p.preventDefault(t)},originalEvent:t,data:t.data||t.detail}).which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e},p.on=function(e,t,n){var o,r,a,i,s,l,c,u;if(e.length)for(r=0,i=e.length;r<i;r++)o=e[r],p.on(o,t,n);else{if(!t.match(" "))return c=n,n=function(e){return e=p.normalizeEvent(e),c(e)},e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?(t="on"+t,e.attachEvent(t,n)):void(e["on"+t]=n);for(a=0,s=(u=t.split(" ")).length;a<s;a++)l=u[a],p.on(e,l,n)}},p.addClass=function(o,r){var a;return o.length?function(){for(var e=[],t=0,n=o.length;t<n;t++)a=o[t],e.push(p.addClass(a,r));return e}():o.classList?o.classList.add(r):o.className+=" "+r},p.hasClass=function(e,t){var n,o,r,a;if(e.length){for(o=!0,r=0,a=e.length;r<a;r++)n=e[r],o=o&&p.hasClass(n,t);return o}return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},p.removeClass=function(o,r){var e,a,t,n,i,s;if(o.length)return function(){for(var e=[],t=0,n=o.length;t<n;t++)a=o[t],e.push(p.removeClass(a,r));return e}();if(o.classList){for(s=[],t=0,n=(i=r.split(" ")).length;t<n;t++)e=i[t],s.push(o.classList.remove(e));return s}return o.className=o.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," ")},p.toggleClass=function(o,r,a){var i;return o.length?function(){for(var e=[],t=0,n=o.length;t<n;t++)i=o[t],e.push(p.toggleClass(i,r,a));return e}():a?p.hasClass(o,r)?void 0:p.addClass(o,r):p.removeClass(o,r)},p.append=function(o,r){var a;return o.length?function(){for(var e=[],t=0,n=o.length;t<n;t++)a=o[t],e.push(p.append(a,r));return e}():o.insertAdjacentHTML("beforeend",r)},p.find=function(e,t){return(e instanceof NodeList||e instanceof Array)&&(e=e[0]),e.querySelectorAll(t)},p.trigger=function(e,t,n){var o;try{o=new CustomEvent(t,{detail:n})}catch(e){(o=document.createEvent("CustomEvent")).initCustomEvent?o.initCustomEvent(t,!0,!0,n):o.initEvent(t,!0,!0,n)}return e.dispatchEvent(o)},t.exports=p},{}],2:[function(M,F,e){(function(e){var i,l,c,r,s,t,n,o,a,u,p,d,m,h,f,_,v,g,y,b,w,k,C,x,E=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};function S(){}l=M("qj/src/qj.coffee"),s=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:t=/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:t,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6759|676[1-3])/,format:t,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:t,length:[13,16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^4011|438935|45(1416|76)|50(4175|6699|67|90[4-7])|63(6297|6368)/,format:t,length:[16],cvcLength:[3],luhn:!0}],c=function(e){var t,n,o;for(e=(e+"").replace(/\D/g,""),n=0,o=s.length;n<o;n++)if((t=s[n]).pattern.test(e))return t},r=function(e){for(var t,n=0,o=s.length;n<o;n++)if((t=s[n]).type===e)return t},f=function(e){for(var t,n=!0,o=0,r=(e+"").split("").reverse(),a=0,i=r.length;a<i;a++)t=r[a],t=parseInt(t,10),(n=!n)&&(t*=2),9<t&&(t-=9),o+=t;return o%10==0},h=function(e){var t;return null!=e.selectionStart&&e.selectionStart!==e.selectionEnd||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},_=function(n){return setTimeout(function(){var e=n.target,t=l.val(e);return t=i.fns.formatCardNumber(t),l.val(e,t)})},a=function(e){var t,n,o,r,a,i,s=String.fromCharCode(e.which);if(/^\d+$/.test(s)&&(r=e.target,i=l.val(r),t=c(i+s),n=(i.replace(/\D/g,"")+s).length,a=16,t&&(a=t.length[t.length.length-1]),!(a<=n||null!=r.selectionStart&&r.selectionStart!==i.length)))return(o=t&&"amex"===t.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(i)?(e.preventDefault(),l.val(r,i+" "+s)):o.test(i+s)?(e.preventDefault(),l.val(r,i+s+" ")):void 0},n=function(e){var t=e.target,n=l.val(t);if(!e.meta&&8===e.which&&(null==t.selectionStart||t.selectionStart===n.length))return/\d\s$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\d\s$/,""))):/\s\d?$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\s\d?$/,""))):void 0},u=function(e){var t,n,o=String.fromCharCode(e.which);if(/^\d+$/.test(o))return t=e.target,n=l.val(t)+o,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),l.val(t,"0"+n+" / ")):/^\d\d$/.test(n)?(e.preventDefault(),l.val(t,n+" / ")):void 0},m=function(e){var t,n,o=String.fromCharCode(e.which);if(/^\d+$/.test(o))return t=e.target,n=l.val(t)+o,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),l.val(t,"0"+n)):/^\d\d$/.test(n)?(e.preventDefault(),l.val(t,""+n)):void 0},p=function(e){var t,n,o=String.fromCharCode(e.which);if(/^\d+$/.test(o))return t=e.target,n=l.val(t),/^\d\d$/.test(n)?l.val(t,n+" / "):void 0},d=function(e){var t,n;if("/"===String.fromCharCode(e.which))return t=e.target,n=l.val(t),/^\d$/.test(n)&&"0"!==n?l.val(t,"0"+n+" / "):void 0},o=function(e){var t,n;if(!e.metaKey&&(t=e.target,n=l.val(t),8===e.which&&(null==t.selectionStart||t.selectionStart===n.length)))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),l.val(t,n.replace(/\s\/\s?\d?$/,""))):void 0},k=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||(32===e.which?e.preventDefault():0===e.which||(e.which<33||(t=String.fromCharCode(e.which),/[\d\s]/.test(t)?void 0:e.preventDefault())))},g=function(e){var t,n,o=e.target,r=String.fromCharCode(e.which);if(/^\d+$/.test(r)&&!h(o))if(n=(l.val(o)+r).replace(/\D/g,""),t=c(n)){if(!(n.length<=t.length[t.length.length-1]))return e.preventDefault()}else if(!(n.length<=16))return e.preventDefault()},b=function(e,t){var n=e.target,o=String.fromCharCode(e.which);if(/^\d+$/.test(o)&&!h(n))return(l.val(n)+o).replace(/\D/g,"").length>t?e.preventDefault():void 0},y=function(e){return b(e,6)},w=function(e){return b(e,2)},C=function(e){return b(e,4)},v=function(e){var t=e.target,n=String.fromCharCode(e.which);if(/^\d+$/.test(n)&&!h(t))return(l.val(t)+n).length<=4?void 0:e.preventDefault()},x=function(e){var t,o,n=e.target,r=l.val(n),a=i.fns.cardType(r)||"unknown";if(!l.hasClass(n,a))return t=function(){for(var e=[],t=0,n=s.length;t<n;t++)o=s[t],e.push(o.type);return e}(),l.removeClass(n,"unknown"),l.removeClass(n,t.join(" ")),l.addClass(n,a),l.toggleClass(n,"identified","unknown"!==a),l.trigger(n,"payment.cardType",a)},S.fns={cardExpiryVal:function(e){var t,n,o=(t=(e=e.replace(/\s/g,"")).split("/",2))[0];return 2===(null!=(n=t[1])?n.length:void 0)&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().slice(0,2)+n),{month:parseInt(o,10),year:n=parseInt(n,10)}},validateCardNumber:function(e){var t,n;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(t=c(e))&&(n=e.length,0<=E.call(t.length,n)&&(!1===t.luhn||f(e))))},validateCardExpiry:function(e,t){var n,o,r;return"object"===_typeof(e)&&"month"in e&&(e=(r=e).month,t=r.year),!(!e||!t)&&(e=l.trim(e),t=l.trim(t),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(parseInt(e,10)<=12&&(2===t.length&&(t=(new Date).getFullYear().toString().slice(0,2)+t),o=new Date(t,e),n=new Date,o.setMonth(o.getMonth()-1),o.setMonth(o.getMonth()+1,1),n<o))))},validateCardCVC:function(e,t){var n,o;return e=l.trim(e),!!/^\d+$/.test(e)&&(t&&r(t)?(n=e.length,0<=E.call(null!=(o=r(t))?o.cvcLength:void 0,n)):3<=e.length&&e.length<=4)},cardType:function(e){var t;return e&&(null!=(t=c(e))?t.type:void 0)||null},formatCardNumber:function(e){var t,n,o,r=c(e);return r?(o=r.length[r.length.length-1],e=(e=e.replace(/\D/g,"")).slice(0,+o+1||9e9),r.format.global?null!=(n=e.match(r.format))?n.join(" "):void 0:(null!=(t=r.format.exec(e))&&t.shift(),null!=t?t.join(" "):void 0)):e}},S.restrictNumeric=function(e){return l.on(e,"keypress",k)},S.cardExpiryVal=function(e){return S.fns.cardExpiryVal(l.val(e))},S.formatCardCVC=function(e){return S.restrictNumeric(e),l.on(e,"keypress",v),e},S.formatCardExpiry=function(e){var t,n;return S.restrictNumeric(e),e.length&&2===e.length?(t=e[0],n=e[1],this.formatCardExpiryMultiple(t,n)):(l.on(e,"keypress",y),l.on(e,"keypress",u),l.on(e,"keypress",d),l.on(e,"keypress",p),l.on(e,"keydown",o)),e},S.formatCardExpiryMultiple=function(e,t){return l.on(e,"keypress",w),l.on(e,"keypress",m),l.on(t,"keypress",C)},S.formatCardNumber=function(e){return S.restrictNumeric(e),l.on(e,"keypress",g),l.on(e,"keypress",a),l.on(e,"keydown",n),l.on(e,"keyup",x),l.on(e,"paste",_),e},S.getCardArray=function(){return s},S.setCardArray=function(e){return s=e,!0},S.addToCardArray=function(e){return s.push(e)},S.removeFromCardArray=function(e){var t;for(t in s)s[t].type===e&&s.splice(t,1);return!0},i=S,F.exports=i,e.Payment=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"qj/src/qj.coffee":1}]},{},[2])(2)}),function a(i,s,l){function c(t,e){if(!s[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};i[t][0].call(r.exports,function(e){return c(i[t][1][e]||e)},r,r.exports,a,i,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){var o,r=e("./src/valid-form"),a=(o=r)&&o.__esModule?o:{default:o};window.ValidForm=a.default,window.ValidForm.toggleInvalidClass=r.toggleInvalidClass,window.ValidForm.handleCustomMessages=r.handleCustomMessages,window.ValidForm.handleCustomMessageDisplay=r.handleCustomMessageDisplay},{"./src/valid-form":3}],2:[function(e,t,n){function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0}),n.clone=o,n.defaults=function(e,t){for(var n in e=o(e||{}),t)void 0===e[n]&&(e[n]=t[n]);return e},n.insertAfter=function(e,t){var n=e.nextSibling;{n?e.parentNode.insertBefore(t,n):parent.appendChild(t)}},n.insertBefore=function(e,t){e.parentNode.insertBefore(t,e)},n.forEach=function(e,t){if(!e)return;if(e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n],n,e)},n.debounce=function(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}},{}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toggleInvalidClass=r,n.handleCustomMessages=a,n.handleCustomMessageDisplay=s,n.default=function(e,t){if(!e||!e.nodeName)throw new Error("First arg to validForm must be a form, input, select, or textarea");var n=void 0,o=e.nodeName.toLowerCase();if(t=(0,l.defaults)(t,c),"form"===o)n=e.querySelectorAll("input, select, textarea"),function(t,e){var n=(0,l.debounce)(100,function(){var e=t.querySelector(":invalid");e&&e.focus()});(0,l.forEach)(e,function(e){return e.addEventListener("invalid",n)})}(e,n);else{if("input"!==o&&"select"!==o&&"textarea"!==o)throw new Error("Only form, input, select, or textarea elements are supported");n=[e]}!function(e,t){var n=t.invalidClass,o=t.customMessages;(0,l.forEach)(e,function(e){r(e,n),a(e,o),s(e,t)})}(n,t)};var l=e("./util");function r(e,t){e.addEventListener("invalid",function(){e.classList.add(t)}),e.addEventListener("input",function(){e.validity.valid&&e.classList.remove(t)})}var i=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing","customError"];function a(t,n){function e(){var e=t.validity.valid?null:function(e,t){t=t||{};for(var n=[e.type+"Mismatch"].concat(i),o=e.validity,r=0;r<n.length;r++){var a=n[r];if(o[a])return e.getAttribute("data-"+a)||t[a]}}(t,n);t.setCustomValidity(e||"")}t.addEventListener("input",e),t.addEventListener("invalid",e)}function s(r,e){var a=e.validationErrorClass,i=e.validationErrorParentClass,s=e.errorPlacement;function t(e){var t=e.insertError,n=r.parentNode,o=n.querySelector("."+a)||document.createElement("div");!r.validity.valid&&r.validationMessage?(o.className=a,o.textContent=r.validationMessage,t&&(("before"===s?(0,l.insertBefore):(0,l.insertAfter))(r,o),n.classList.add(i))):(n.classList.remove(i),o.remove())}r.addEventListener("input",function(){t({insertError:!1})}),r.addEventListener("invalid",function(e){e.preventDefault(),t({insertError:!0})})}var c={invalidClass:"invalid",validationErrorClass:"validation-error",validationErrorParentClass:"has-validation-error",customMessages:{},errorPlacement:"before"}},{"./util":2}]},{},[1]),function(c,u,p){var n="minnpost_giving",o={debug:!1,stripe_publishable_key:"",plaid_env:"",plaid_public_key:"",plaid_link:"#authorize-ach",minnpost_root:"https://www.minnpost.com",progress_selector:".m-support-progress",donate_form_selector:"#donate",confirm_form_selector:"#confirm",finish_section_selector:"#panel--confirmation",pay_cc_processing_selector:'input[id="pay-fees"]',fee_amount:".processing-amount",level_amount_selector:"#panel--pay .amount .level-amount",original_amount_selector:'[name="amount"]',fair_market_value_selector:"#fair_market_value",full_amount_selector:".full-amount",installment_period_selector:'[name="installment_period"]',name_selector:".m-form-item-display-name",in_honor_or_memory_field_selector:".m-form-item-honor-memory",honor_or_memory_chooser:'input[name="in_honor_or_memory"]',honor_type_selector:".a-honor-type",honor_memory_input_group:".a-honor-or-memory",anonymous_selector:"#anonymous",show_billing_country_selector:"#billing_show_country",billing_country_selector:".m-form-item-country",show_shipping_country_selector:"#shipping_show_country",shipping_country_selector:".m-form-item-shipping-country",shipping_address_selector:".m-form-item-shipping-address",use_for_shipping_selector:"#useforshipping",email_field_selector:"#email",password_field_selector:"#password",first_name_field_selector:"#first_name",last_name_field_selector:"#last_name",account_city_selector:"#billing_city",account_state_selector:"#billing_state",account_zip_selector:"#billing_zip",create_mp_selector:"#creatempaccount",password_selector:".m-form-item-password",additional_amount_field:"#additional_donation",shipping_selector:"fieldset.m-shipping-information",choose_payment:"#choose-payment-method",payment_method_selector:".payment-method",cc_num_selector:"#card-number",cc_exp_selector:"#card-expiry",cc_cvv_selector:"#card-cvc",pay_button_selector:".a-button-pay",opp_id_selector:"#lock_key",newsletter_group_selector:".support-newsletters"};function t(e,t){this.element=e,this.options=c.extend({},o,t),this._defaults=o,this._name=n,this.init()}t.prototype={init:function(e,t){p.documentElement.classList.remove("no-js"),p.documentElement.classList.add("js"),this.options.amount=!0!==e?parseFloat(c(this.options.level_amount_selector,this.element).text()):t,this.options.original_amount=parseInt(c(this.options.original_amount_selector,this.element).val(),10),this.options.processing_fee=(Math.round(parseFloat(this.options.fee_amount)*Math.pow(10,2))/Math.pow(10,2)).toFixed(2),this.options.processing_fee_text=this.options.processing_fee,this.options.create_account=!1;var n=c(this.options.pay_button_selector).text();this.options.button_text=n,this.stripe=Stripe(this.options.stripe_publishable_key),this.elements=this.stripe.elements({fonts:[{cssSrc:"https://use.typekit.net/cxj7fzg.css"}]}),""!==p.referrer&&c("#edit_url").prop("href",p.referrer),!0===this.options.debug&&this.debug(this.options),this.analyticsTracking(this.options),this.amountAsRadio(this.element,this.options),this.amountUpdated(this.element,this.options),0<c(this.options.pay_cc_processing_selector).length&&this.creditCardProcessingFees(this.options),0<c(this.options.donate_form_selector).length&&(this.donateAnonymously(this.element,this.options),this.honorOrMemoryToggle(this.element,this.options),this.outsideUnitedStates(this.element,this.options),this.shippingAddress(this.element,this.options),this.allowMinnpostAccount(this.element,this.options),this.choosePaymentMethod(this.element,this.options),this.creditCardFields(this.element,this.options),this.achFields(this.element,this.options),this.validateAndSubmit(this.element,this.options)),0<c(this.options.confirm_form_selector).length&&(this.showNewsletterSettings(this.element,this.options),this.confirmMessageSubmit(this.element,this.options))},debug:function(e){!0===this.options.debug&&("object"!==_typeof(e)?console.log(e):console.dir(e),console.dir(this))},analyticsTracking:function(e){var t,n=c(e.progress_selector),o=0,r=c(e.opp_id_selector).val(),a=!1;if(0<n.length&&(o=c("li",n).length,t=c("li .active",n).parent().index()+1),0<n.length&&0===c(e.confirm_form_selector).length)t===o&&0===c(e.confirm_form_selector).length&&(t+=1,a=!0);else if(0<n.length&&0<c(e.confirm_form_selector).length||0<c(e.finish_section_selector).length)t="purchase";else if(0===n.length)return;this.debug("step is "+t+" and nav item count is "+o+" and opp id is "+r+" and post purchase is "+a),this.analyticsTrackingStep(t,a)},analyticsTrackingStep:function(e,t){var n,o,r=c(this.options.progress_selector),a=c(this.options.original_amount_selector).val(),i=c(this.options.opp_id_selector).val(),s="one-time",l=this;0<c(this.options.installment_period_selector).length&&(s=c(this.options.installment_period_selector).val()),0<r.length&&!0!==t&&(o={amount:a,installment_period:s},c.ajax({method:"POST",url:"/calculate-member-level/",data:o}).done(function(e){0<c(e.level).length&&(n=e.level.level,l.debug("add product: id is minnpost_"+n.toLowerCase()+"_membership and name is MinnPost "+n.charAt(0).toUpperCase()+n.slice(1)+" Membership and variant is "+s.charAt(0).toUpperCase()+s.slice(1)),ga("ec:addProduct",{id:"minnpost_"+n.toLowerCase()+"_membership",name:"MinnPost "+n.charAt(0).toUpperCase()+n.slice(1)+" Membership",category:"Donation",brand:"MinnPost",variant:s.charAt(0).toUpperCase()+s.slice(1),price:a,quantity:1}))})),"purchase"===e?(this.debug("add a purchase action. step is "+e),ga("ec:setAction",e,{id:i,affiliation:"MinnPost",revenue:a})):(this.debug("add a checkout action. step is "+e),ga("ec:setAction","checkout",{step:e})),ga("set",{page:u.location.pathname,title:p.title}),ga("send","pageview",u.location.pathname)},amountAsRadio:function(e,t){c(t.original_amount_selector,e).change(function(){c(this).is(":radio")&&(t.original_amount=parseInt(c(t.original_amount_selector+":checked",e).val(),10))})},amountUpdated:function(e,t){var n=this,o=c(t.choose_payment+" input").val(),r=c(t.original_amount_selector,e);r.is(":radio")&&(r=c(t.original_amount_selector+":checked",e)),n.setFairMarketValue(r),c(t.original_amount_selector,e).change(function(){n.options.original_amount=parseInt(c(this,e).val(),10),"bank_account"===o?n.calculateFees(n.options.original_amount,"bank_account"):n.calculateFees(n.options.original_amount,"card"),n.setFairMarketValue(c(this,e))}),c(t.additional_amount_field,e).change(function(){n.options.original_amount=parseInt(c(t.original_amount_selector,e).val(),10),"bank_account"===o?n.calculateFees(n.options.original_amount,"bank_account"):n.calculateFees(n.options.original_amount,"card")})},setFairMarketValue:function(e){var t;0<c(this.options.fair_market_value_selector).length&&(t=e.data("fair-market-value"),c(this.options.fair_market_value_selector).val(t))},calculateFees:function(e,t){var n,o=this,r=e;0<c(this.options.additional_amount_field).length&&0<c(this.options.additional_amount_field).val()&&(n=c(this.options.additional_amount_field).val(),r=parseInt(n,10)+parseInt(e,10));var a={amount:r,stripe_payment_type:t};o.setStripePaymentType(t),c.ajax({method:"POST",url:"/calculate-fees/",data:a}).done(function(e){0<c(e.fees).length&&(c(o.options.fee_amount).text(parseFloat(e.fees).toFixed(2)),o.creditCardFeeCheckbox(c(o.options.pay_cc_processing_selector)))})},creditCardProcessingFees:function(e){var t=this;t.creditCardFeeCheckbox(c(e.pay_cc_processing_selector)),c(e.pay_cc_processing_selector).on("change",function(){t.creditCardFeeCheckbox(this)})},setStripePaymentType:function(e){0===c('input[name="stripe_payment_type"]').length&&c(this.options.donate_form_selector).append('<input type="hidden" name="stripe_payment_type">'),c('input[name="stripe_payment_type"]').val(e)},creditCardFeeCheckbox:function(e){var t=c(e).is(":checked")||c(e).prop("checked")?(c(".amount .level-amount").addClass("full-amount"),this.options.original_amount+parseFloat(c(this.options.fee_amount).text())):this.options.original_amount;c(this.options.full_amount_selector).text(parseFloat(t).toFixed(2))},donateAnonymously:function(e,t){var n=this;n.toggleAnonymous(c(t.anonymous_selector,e)),c(t.anonymous_selector,e).change(function(){n.toggleAnonymous(c(this))})},toggleAnonymous:function(e){e.is(":checked")?c(this.options.name_selector+" div:first",this.element).hide():c(this.options.name_selector+" div:first",this.element).show()},honorOrMemory:function(e,t){c(t.honor_or_memory_chooser+":checked").val()?(c(t.honor_memory_input_group,e).show(),c(t.honor_type_selector).text(c(t.honor_or_memory_chooser+":checked").val())):(c(t.honor_memory_input_group,e).hide(),c(t.honor_name_selector+" input",e).val(""))},honorOrMemoryToggle:function(e,t){var n=this;n.honorOrMemory(n.element,n.options),c(t.honor_or_memory_chooser,e).change(function(){n.honorOrMemory(n.element,n.options)})},outsideUnitedStates:function(e,t){c(t.show_billing_country_selector).click(function(){return c(t.billing_country_selector).show(),c(this).parent().hide(),!1}),c(t.show_shipping_country_selector).click(function(){return c(t.shipping_country_selector).show(),c(this).parent().hide(),!1})},shippingAddress:function(e,t){var n=this,o=!1;0<c(t.use_for_shipping_selector).length&&(o=!0),!0===o&&(c(t.use_for_shipping_selector,e).parent().show(),c(t.use_for_shipping_selector,e).is(":checked")?c(t.shipping_selector).hide():c(t.shipping_selector).show(),c(t.use_for_shipping_selector,e).change(function(){n.shippingAddress(e,t)}))},allowMinnpostAccount:function(t,n){var e,o=this;function r(){var e=c(n.email_field_selector,t).val();o.checkMinnpostAccount(t,n,e)}o.showPassword(),o.showPasswordStrength(),o.spamEmail(c(n.email_field_selector,t)),c(n.email_field_selector,t).change(function(){o.spamEmail(c(n.email_field_selector,t))}),o.toggleAccountFields(c(n.create_mp_selector,t)),c(n.create_mp_selector,t).change(function(){o.toggleAccountFields(c(n.create_mp_selector,t))});c(n.email_field_selector,t).keyup(function(){clearTimeout(e),c(n.email_field_selector,t).val&&(e=setTimeout(r,5e3))})},spamEmail:function(e){var t=e.parent();0===c(".a-spam-email",t).length&&t.append('<p class="a-form-caption a-error a-spam-email">This email address has been detected as a spammer.</p>'),c(".a-spam-email",t).hide(),t.removeClass("invalid a-error")},toggleAccountFields:function(e){e.is(":checked")?(e.parent().before('<p class="a-form-caption a-account-exists a-account-exists-success">There is already a MinnPost.com account with this email address.</p>'),c(".a-account-exists").hide(),c(this.options.password_selector,this.element).show(),this.options.create_account=!0):c(this.options.password_selector,this.element).hide()},showPassword:function(){var e=c(".btn-submit"),t=c(this.options.password_selector,this.element),n=c('input[name="password"]',t);c(".a-account-exists").hide();t.append('<div class="a-form-show-password a-form-caption"><label><input type="checkbox" name="show_password" id="show-password-checkbox" value="1"> Show password</label></div>'),c("#show-password-checkbox").on("click",function(e){c(this).is(":checked")?n.attr("type","text"):n.attr("type","password")}),e.on("click",function(e){n.attr("type","password")})},showPasswordStrength:function(){var e=this;0<c(".a-password-strength").length&&(c(".a-form-show-password").after(c('<div class="a-password-strength"><meter max="4" id="password-strength"><div></div></meter><p class="a-form-caption" id="password-strength-text"></p></div>')),c("body").on("keyup","input[name=password]",function(){e.checkPasswordStrength(c("input[name=password]"),c("#password-strength"),c("#password-strength-text"))}))},checkPasswordStrength:function(e,t,n){var o=e.val(),r=zxcvbn(o).score;switch(n.removeClass("short bad good strong"),r){case 2:n.addClass("bad").html("Strength: <strong>Weak</strong>");break;case 3:n.addClass("good").html("Strength: <strong>Medium</strong>");break;case 4:n.addClass("strong").html("Strength: <strong>Strong</strong>");break;case 5:n.addClass("short").html("Strength: <strong>Very weak</strong>");break;default:n.addClass("short").html("Strength: <strong>Very weak</strong>")}return t.val(r),r},checkMinnpostAccount:function(t,n,e){var o={email:e},r=this;c.ajax({method:"GET",url:n.minnpost_root+"/wp-json/user-account-management/v1/check-account",data:o}).done(function(e){if("success"===e.status&&"user exists"===e.reason)c(n.create_mp_selector,t).is(":checked")&&(c(n.password_selector,t).hide(),c(n.create_mp_selector,t).parent().hide(),c(".a-account-exists",t).show()),c(n.create_mp_selector,t).on("change",function(){c(n.create_mp_selector,t).is(":checked")&&(c(n.password_selector,t).hide(),c(n.create_mp_selector,t).parent().hide(),c(".a-account-exists",t).show())});else{if("spam"!==e.status)return c(n.create_mp_selector,t).is(":checked")?(c(n.password_selector,t).show(),n.create_account=!0):c(n.password_selector,t).hide(),c(".a-account-exists",t).hide(),!1;c(r.options.email_field_selector).addClass("invalid a-error"),c(".a-spam-email").show()}})},choosePaymentMethod:function(e,t){var n,o,r=this;0<c(t.choose_payment).length&&(c(t.choose_payment+" input").is(":checked")&&(n=c(t.choose_payment+" input:checked").attr("id"),o=c(t.choose_payment+" input:checked").val(),r.setupPaymentMethod(n,o)),c(t.choose_payment+" input").change(function(e){r.setupPaymentMethod(this.id,this.value),"bank_account"===this.value?(c('input[name="stripeToken"]',c(r.options.donate_form_selector)).remove(),r.achFields(r.element,r.options)):(c('input[name="public_token"]',c(r.options.donate_form_selector)).remove(),c('input[name="account_id"]',c(r.options.donate_form_selector)).remove(),c('input[name="bankToken"]',c(r.options.donate_form_selector)).remove(),r.calculateFees(r.options.original_amount,"card"))}))},setupPaymentMethod:function(e,t){c(this.options.payment_method_selector).removeClass("active"),c(this.options.payment_method_selector+"."+e).addClass("active"),c(this.options.payment_method_selector+":not(.active) input").val(""),"bank_account"===t?this.calculateFees(this.options.original_amount,"bank_account"):this.calculateFees(this.options.original_amount,"card")},creditCardFields:function(n,o){var r=this,e={base:{iconColor:"#666EE8",lineHeight:"43px",fontWeight:400,fontFamily:"ff-meta-web-pro",fontSize:"24px"},invalid:{color:"#1a1818"}};0===c(".credit-card-group").length&&0===c(".payment-method.choose-card").length||(r.cardNumberElement=r.elements.create("cardNumber",{style:e}),r.cardNumberElement.mount(o.cc_num_selector),r.cardExpiryElement=r.elements.create("cardExpiry",{style:e}),r.cardExpiryElement.mount(o.cc_exp_selector),r.cardCvcElement=r.elements.create("cardCvc",{style:e}),r.cardCvcElement.mount(o.cc_cvv_selector),r.cardNumberElement.on("change",function(e){var t="card";r.stripeErrorDisplay(e,c(o.cc_num_selector,n),n,o),r.buttonStatus(o,c(r.options.donate_form_selector).find("button"),!1),e.brand&&("amex"===e.brand&&(t="amex"),r.setBrandIcon(e.brand)),r.calculateFees(r.options.original_amount,t)}),r.cardExpiryElement.on("change",function(e){r.stripeErrorDisplay(e,c(o.cc_exp_selector,n),n,o),r.buttonStatus(o,c(r.options.donate_form_selector).find("button"),!1)}),r.cardCvcElement.on("change",function(e){r.stripeErrorDisplay(e,c(o.cc_cvv_selector,n),n,o),r.buttonStatus(o,c(r.options.donate_form_selector).find("button"),!1)}))},setBrandIcon:function(e){var t={visa:"pf-visa",mastercard:"pf-mastercard",amex:"pf-american-express",discover:"pf-discover",diners:"pf-diners",jcb:"pf-jcb",unknown:"pf-credit-card"},n=p.getElementById("brand-icon"),o="pf-credit-card";e in t&&(o=t[e]);for(var r=n.classList.length-1;0<=r;r--)n.classList.remove(n.classList[r]);n.classList.add("pf"),n.classList.add(o)},achFields:function(o,r){var t,a="bankToken",i='input[name="'+a+'"]';""!=r.plaid_env&&""!=r.key&&"undefined"!=typeof Plaid&&(t=Plaid.create({selectAccount:!0,apiVersion:"v2",env:r.plaid_env,clientName:"MinnPost",key:r.plaid_public_key,product:"auth",onLoad:function(){},onSuccess:function(e,t){var n=c(r.donate_form_selector);n.append(c('<input type="hidden" name="public_token" />').val(e)),n.append(c('<input type="hidden" name="account_id" />').val(t.account_id)),c.ajax({url:"/plaid_token/",data:c(n).serialize(),type:"POST"}).done(function(e){void 0!==e.error?c(r.plaid_link).parent().after('<p class="error">'+e.error+"</p>"):(0<c(i).length?c(i).val(e.stripe_bank_account_token):c(r.donate_form_selector).prepend(c('<input type="hidden" name="'+a+'">').val(e.stripe_bank_account_token)),c(r.plaid_link,o).html("<strong>Your account was successfully authorized</strong>").contents().unwrap())}).error(function(e){c(r.plaid_link).parent().after('<p class="error">'+e.error+"</p>")})},onExit:function(){}}),c(r.plaid_link,o).click(function(e){e.preventDefault(),c(r.payment_method_selector+" .error").remove(),t.open()}))},buttonStatus:function(e,t,n){t.prop("disabled",n),!1===n?t.text(e.button_text):t.text("Processing")},scrollToFormError:function(){var a=c(".m-form");a.find(":input").on("invalid",function(){var e=c(this),t=a.find(".a-error").first(),n=t.parent();if(e[0]===t[0]){var o=n.offset().top,r=u.pageYOffset;if(r<o&&o<r+u.innerHeight)return!0;c("html, body").scrollTop(o)}})},validateAndSubmit:function(a,i){p.querySelectorAll(".m-form").forEach(function(e){ValidForm(e,{validationErrorParentClass:"m-has-validation-error",validationErrorClass:"a-validation-error",invalidClass:"a-error",errorPlacement:"after"})}),this.scrollToFormError();var s=this;c(i.donate_form_selector).submit(function(e){e.preventDefault(),c(".a-check-field").remove(),c("input, label",a).removeClass("a-error");var t,n,o=!0,r=c('input[name="stripe_payment_type"]').val();c(s.options.choose_payment+" input").change(function(){c(s.options.payment_method_selector+" .error").remove(),s.buttonStatus(i,c(s.options.donate_form_selector).find("button"),!1)}),"bank_account"===r&&0===c('input[name="bankToken"]').length&&(o=!1,c(s.options.payment_method_selector).prepend('<p class="error">You are required to enter credit card information, or to authorize MinnPost to charge your bank account, to make a payment.</p>')),!0===o?(s.buttonStatus(s.options,c(s.options.donate_form_selector).find("button"),!0),t=s.generateTokenData(),!0===s.options.create_account&&(n={email:c(s.options.email_field_selector,a).val(),first_name:c(s.options.first_name_field_selector,a).val(),last_name:c(s.options.last_name_field_selector,a).val(),password:c(s.options.password_field_selector,a).val(),city:c(s.options.account_city_selector,a).val(),state:c(s.options.account_state_selector,a).val(),zip:c(s.options.account_zip_selector,a).val()},c.ajax({method:"POST",url:s.options.minnpost_root+"/wp-json/user-account-management/v1/create-user",data:n}).done(function(e){"success"===e.status&&e.reason})),0==c('input[name="bankToken"]').length?s.createToken(s.cardNumberElement,t):s.stripeTokenHandler(c("#bankToken").val(),"bank_account")):s.buttonStatus(s.options,c(s.options.donate_form_selector).find("button"),!1)})},stripeErrorDisplay:function(e,t,n,o){var r=t.attr("id");c(".a-card-instruction."+r).removeClass("a-error"),c(".a-card-instruction."+r).empty(),e.error?(c(".a-card-instruction."+r).text(e.error.message+" Please try again."),c(".a-card-instruction."+r).addClass("a-error"),t.parent().addClass("a-error")):(c(".a-card-instruction."+r).removeClass("a-error"),c(".a-card-instruction."+r).empty(),c(o.cc_num_selector,n).removeClass("a-error"),c(o.cc_exp_selector,n).removeClass("a-rror"),c(o.cc_cvv_selector,n).removeClass("a-error"),c(o.cc_num_selector,n).parent().removeClass("a-error"),c(o.cc_exp_selector,n).parent().removeClass("a-error"),c(o.cc_cvv_selector,n).parent().removeClass("a-error"))},generateTokenData:function(){var e={},t="",t=0<c("#full_name").length?c("#full_name").val():c("#first_name").val()+" "+c("#last_name").val();e.name=t;var n="None";""!=c('input[name="full_address"]').val()&&(n=c("#full_address").val(),""!=c('input[name="billing_street"]').val()&&(n=c('input[name="billing_street"]').val()),e.address_line1=n);var o;""!=c('input[name="billing_city"]').val()&&(o=c('input[name="billing_city"]').val(),e.address_city=o);var r;""!=c('input[name="billing_state"]').val()&&(r=c('input[name="billing_state"]').val(),e.address_state=r);var a;""!=c('input[name="billing_zip"]').val()&&(a=c('input[name="billing_zip"]').val(),e.address_zip=a);var i="US";return""!=c('input[name="billing_country"]').val()&&(i=c('input[name="billing_country"]').val()),e.address_country=i,e},createToken:function(e,t){var o=this;o.stripe.createToken(e,t).then(function(e){var t,n;e.error?(o.buttonStatus(o.options,c(o.options.donate_form_selector).find("button"),!1),t=e.error.field+"_field_selector",n="",n="string"==typeof e.error.message?e.error.message:e.error.message[0],0<c(t).length&&(c(o.options[t],element).addClass("a-error"),c(o.options[t],element).prev().addClass("a-error"),c(o.options[t],element).after('<span class="a-check-field invalid">'+n+"</span>"))):o.stripeTokenHandler(e.token,"card")})},stripeTokenHandler:function(e,t){var i=this,n=c(this.options.donate_form_selector),o="",r="stripeToken",a='input[name="'+r+'"]',o=void 0!==c(n).data("action")?c(n).data("action"):u.location.pathname;"card"===t&&(0<e.card.brand.length&&"American Express"===e.card.brand&&(t="amex"),0<c(a).length?c(a).val(e.id):n.append(c('<input type="hidden" name="'+r+'">').val(e.id))),c('input[name="stripe_payment_type"]').val(t),c.ajax({url:o,cache:!1,data:c(n).serialize(),type:"POST"}).done(function(a){void 0!==a.errors?(i.buttonStatus(i.options,c(i.options.donate_form_selector).find("button"),!1),c.each(a.errors,function(e,t){var n=t.field+"_field_selector",o="",r="",o="string"==typeof t.message?t.message:t.message[0];0<c(i.options[n]).length&&(c(i.options[n]).addClass("a-error"),c(i.options[n]).prev().addClass("a-error"),c(i.options[n]).after('<span class="a-check-field invalid">'+o+"</span>")),void 0!==t&&(i.buttonStatus(i.options,c(i.options.donate_form_selector).find("button"),!1,"card"),"invalid_number"!=t.code&&"incorrect_number"!=t.code&&"card_declined"!=t.code&&"processing_error"!=t.code||(r=c(i.options.cc_num_selector)),"invalid_expiry_month"!=t.code&&"invalid_expiry_year"!=t.code&&"expired_card"!=t.code||(r=c(i.options.cc_exp_selector)),"invalid_cvc"!=t.code&&"incorrect_cvc"!=t.code||(r=c(i.options.cc_cvv_selector)),""!==r&&i.stripeErrorDisplay(a.errors,r,i.element,i.options),"recaptcha"==t.field&&c(i.options.pay_button_selector).before('<p class="a-form-caption a-recaptcha-error">'+o+"</p>"),"invalid_request_error"==t.type&&c(i.options.pay_button_selector).before('<p class="error error-invalid-request">'+t.message+"</p>")),void 0!==a.errors[0]&&(n=a.errors[0].field+"_field_selector",0<c(n).length&&c("html, body").animate({scrollTop:c(options[n]).parent().offset().top},2e3))})):n.get(0).submit()}).error(function(e){i.buttonStatus(i.options,c(i.options.donate_form_selector).find("button"),!1)})},showNewsletterSettings:function(n,o){var e,r="";0<c(o.newsletter_group_selector).length&&(e={shortcode:"newsletter_form",placement:"useraccount"},c.ajax({method:"GET",url:o.minnpost_root+"/wp-json/minnpost-api/v2/mailchimp/form",data:e}).done(function(e){void 0!==e.group_fields&&(c.each(e.group_fields,function(e,t){r+='<fieldset class="m-form-item support-newsletter m-form-item-'+t.type+'">',r+="<label>"+t.name+":</label>",0<t.contains.length&&(r+='<div class="m-form-item m-form-item-newsletter">',c.each(t[t.contains],function(e,t){r+='<label><input name="groups_submitted" type="checkbox" value="'+t.id+'">'+t.name+"</label>"}),r+="</div>"),r+="</fieldset>"}),c(o.newsletter_group_selector).html(r))})),0<c(o.newsletter_group_selector).length&&void 0!==c(o.email_field_selector,n).val()&&(e={email:c(o.email_field_selector,n).val()},c.ajax({method:"GET",url:o.minnpost_root+"/wp-json/minnpost-api/v2/mailchimp/user",data:e}).done(function(e){var t;void 0!==e.mailchimp_status&&c(o.email_field_selector,n).after('<input name="mailchimp_status" type="hidden" value="'+e.mailchimp_status+'">'),void 0!==e.mailchimp_user_id&&c(o.email_field_selector,n).after('<input name="mailchimp_user_id" type="hidden" value="'+e.mailchimp_user_id+'">'),"subscribed"===e.mailchimp_status&&(c(".a-confirm-instructions").text(c(".a-confirm-instructions").attr("data-known-user")),t=e.groups,c.each(t,function(e,t){!0===t?c(':checkbox[value="'+e+'"]').prop("checked",!0):c(':checkbox[value="'+e+'"]').prop("checked",!1)}))}))},confirmMessageSubmit:function(a,i){var s=c(i.newsletter_group_selector+" input").serialize();c(i.confirm_form_selector).submit(function(e){e.preventDefault();var o,t=c(i.confirm_form_selector),n=c(i.newsletter_group_selector+" input:checked"),r=n.serialize();s!==r&&void 0!==n?(o={email:c(i.email_field_selector,a).val(),first_name:c(i.first_name_field_selector,a).val(),last_name:c(i.last_name_field_selector,a).val(),groups_submitted:{},groups_available:"all"},0<c('input[name="mailchimp_status"]').length&&(o.mailchimp_status=c('input[name="mailchimp_status"]').val()),0<c('input[name="mailchimp_user_id"]').length&&(o.mailchimp_user_id=c('input[name="mailchimp_user_id"]').val()),void 0!==n&&c.each(n,function(e,t){var n=c(this).val();o.groups_submitted[e]=n}),c.ajax({url:i.minnpost_root+"/wp-json/minnpost-api/v2/mailchimp/user",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(o)}).done(function(e){e.success,t.get(0).submit()}).fail(function(e){t.get(0).submit()})):t.get(0).submit()})}},c.fn[n]=function(e){return this.each(function(){c.data(this,"plugin_"+n)||c.data(this,"plugin_"+n,new t(this,e))})}}(jQuery,window,document);
>>>>>>> use-minnpost-salesforce-fields
